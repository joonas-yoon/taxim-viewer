(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){},107:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),o=n(64),c=n.n(o),i=(n(104),n(17)),u=n(3),s=n(11),d=n(25),m=n(13),f=m.b.div(a||(a=Object(s.a)(["\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgb(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n"])));var b,p,g,v,j,E,k,O,h,y,x,C,w,S,z,L,F,M,R,T=function(e){var t=Object(d.d)({appkey:"44189597732bee11ec3007f7d1464a90",libraries:["services","clusterer"],retries:3}),n=t.loading,a=t.error;return l.a.createElement(l.a.Fragment,null,n||a?l.a.createElement(f,null):l.a.createElement(d.b,e))},_=n(151),D=m.b.div(b||(b=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  left: calc(0px + 50%);\n  translate: -50% 0%;\n  margin: 0 auto;\n  width: fit-content;\n  height: 42px;\n  place-items: center;\n  padding: 6px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1em;\n  box-sizing: border-box;\n\n  ","\n"])),function(e){return"top"==e.position?Object(m.a)(p||(p=Object(s.a)(["\n          top: 1rem;\n        "]))):Object(m.a)(g||(g=Object(s.a)(["\n          bottom: 1rem;\n        "])))}),P=m.b.div(v||(v=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: ",";\n  margin: 0px auto;\n  place-items: center;\n  box-sizing: border-box;\n"])),function(e){var t=e.gap;return"".concat(t,"rem")}),U=function(){return l.a.createElement(_.a,{orientation:"vertical"})},B=function(e){var t=e.position,n=e.gap,a=void 0===n?.5:n,r=e.style,o=void 0===r?{}:r,c=e.children;return l.a.createElement(D,{position:t,style:o},l.a.createElement(P,{gap:a},c))},I=n(156),A=n(2),N=n(10),J=Object(m.c)(j||(j=Object(s.a)(["\n  from {\n    transform: scale(1.0);\n    opacity: 1.0;\n  }\n  to {\n    transform: scale(2.0);\n    opacity: 0.0;\n  }\n"]))),W=m.b.div(E||(E=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1em;\n  height: 1em;\n  background: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n\n  ",";\n\n  > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"])),function(e){return e.color},function(e){return e.size},function(e){return e.animate&&Object(m.a)(k||(k=Object(s.a)(["\n      animation: "," 1s ease-in-out infinite;\n    "])),J)}),q=m.b.div(O||(O=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),V=function(e){var t=e.color,n=void 0===t?"dodgerblue":t,a=e.size,r=void 0===a?2:a,o=e.children;return l.a.createElement(q,null,l.a.createElement(W,{color:n,size:r,animate:!0}),l.a.createElement(W,{color:n,size:r},l.a.createElement("div",{className:"icon"},o)))},Z=n(75),H=n.n(Z),X=n(71),G=n.n(X),K=m.b.div(h||(h=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-width: 280px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  transition: transform 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  z-index: 99999;\n\n  ","\n"])),function(e){return e.fold&&Object(m.a)(y||(y=Object(s.a)(["\n      transform: translateX(-100%);\n    "])))}),Q=m.b.div(x||(x=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  outline: 0;\n  margin: 0;\n  padding: 1em 2em;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  overflow-y: auto;\n"]))),Y=m.b.div(C||(C=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1.25em;\n  height: 100%;\n  right: -1.25em;\n  justify-content: center;\n  align-items: center;\n"]))),$=m.b.div(w||(w=Object(s.a)(["\n  width: 100%;\n  height: 3em;\n  display: flex;\n  padding: 0 2px;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  clip-path: inset(-1em -1em -1em 0px);\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  cursor: pointer;\n"]))),ee=function(e){var t=e._ref,n=e.children,a=Object(r.useState)(!0),o=Object(u.a)(a,2),c=o[0],i=o[1],s=Object(r.useCallback)(function(){var e={sx:{width:"100%",fontSize:"1rem"}};return c?l.a.createElement(G.a,e):l.a.createElement(H.a,e)},[c]);return l.a.createElement(K,{fold:c},l.a.createElement(Q,{ref:t},l.a.createElement(l.a.Fragment,null,n)),l.a.createElement(Y,null,l.a.createElement($,{onClick:function(e){i(function(e){return!e})}},l.a.createElement(s,null))))},te=l.a.forwardRef(function(e,t){return l.a.createElement(ee,{_ref:t},l.a.createElement(l.a.Fragment,null,e.children))}),ne=n(45),ae=n.n(ne),re=n(80),le=n.n(re),oe=n(81),ce=n.n(oe),ie=n(155),ue=n(150),se={currentTime:null,logs:[]},de=Object(r.createContext)(void 0),me=function(e){var t=Object(r.useState)(se),n=Object(u.a)(t,2),a=n[0],o=n[1];return l.a.createElement(de.Provider,{value:{state:Object(i.a)({},a),setState:o}},l.a.createElement(l.a.Fragment,null,e.children))},fe=n(148),be=n(147),pe=n(149),ge=n(44),ve=n.n(ge),je=n(79),Ee=n.n(je),ke=n(78),Oe=n.n(ke),he=n(153),ye=n(152),xe=n(154),Ce=function(e){var t=e.tooltip,n=void 0===t?void 0:t,a=e.tooltipColor,r=void 0===a?"primary":a,o=e.tooltipPlacement,c=void 0===o?"bottom":o,i=e.tooltipSize,u=void 0===i?"sm":i,s=e.active,d=e.disabled,m=void 0!==d&&d,f=e.loading,b=void 0!==f&&f,p=e.variant,g=void 0===p?"plain":p,v=e.size,j=e.onClick,E=e.children;return l.a.createElement(ye.a,{arrow:!0,title:n,color:r,placement:c,size:u,variant:g},l.a.createElement(he.a,{variant:s?"solid":"soft",sx:{"--IconButton-size":v},disabled:m,onClick:j},b?l.a.createElement(xe.a,{color:"primary",size:"sm",value:33,variant:"plain"}):E))},we=n(77),Se=n.n(we),ze=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.disabled,o=void 0!==r&&r,c=e.loading,i=void 0!==c&&c,u=e.icon,s=e.onClick;return l.a.createElement(Ce,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,disabled:o,loading:i,variant:"outlined",size:"32px",onClick:s},u)},Le=function(e){var t=e.speed,n=e.onSelectSpeed,a=l.a.useState(null),o=Object(u.a)(a,2),c=o[0],i=o[1],s=Boolean(c),d=function(){i(null)},m=Object(r.useCallback)(function(e){return l.a.createElement(fe.a,Object.assign({},t===e&&{selected:!0,variant:"soft"},{onClick:function(){return function(e){n(e),d()}(e)}}),"x",e.toFixed(1))},[t]);return l.a.createElement("div",null,l.a.createElement(ze,{title:s?void 0:"\uc7ac\uc0dd \uc18d\ub3c4",onClick:function(e){i(e.currentTarget)},icon:l.a.createElement(Se.a,null)}),l.a.createElement(be.a,{anchorEl:c,open:s,onClose:d,color:"primary",size:"sm",variant:"plain"},m(1),m(2),m(5),m(10)))},Fe=m.b.div(S||(S=Object(s.a)(["\n  width: calc(100vw - 600px);\n  width: calc(100svw - 600px);\n  max-width: 480px;\n  padding-left: 0.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n"]))),Me=function(e){var t=e.running,n=e.runable,a=e.progressMax,o=e.progressCurrent,c=e.speed,i=e.onSelectSpeed,u=e.onProgressUpdated,s=e.onClickPlay,d=e.onClickUpload,m=Object(r.useCallback)(function(){return t?l.a.createElement(ze,{title:"\uc77c\uc2dc\uc815\uc9c0",onClick:s,icon:l.a.createElement(Oe.a,null)}):l.a.createElement(ze,{title:"\uc7ac\uc0dd",disabled:!n,onClick:s,icon:l.a.createElement(Ee.a,null)})},[t,n]),f=Object(r.useCallback)(function(){var e=Object(r.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"upload-log",style:{width:"32px"}},l.a.createElement("input",{ref:e,style:{display:"none"},id:"upload-log",name:"upload-log",type:"file",accept:".json,application/json",onChange:d}),l.a.createElement(ze,{title:"\uc5c5\ub85c\ub4dc",icon:l.a.createElement(ve.a,null),onClick:function(){e.current&&e.current.click()}})))},[d]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B,{position:"bottom"},l.a.createElement(f,null),l.a.createElement(m,null),l.a.createElement(Le,{speed:c,onSelectSpeed:i}),l.a.createElement(U,null),l.a.createElement(Fe,null,l.a.createElement(pe.a,{color:"primary","aria-label":"Timestamp",defaultValue:0,value:o,min:0,max:a,step:1,disabled:!n||t,size:"md",valueLabelDisplay:"off",variant:"solid",onChange:function(e,t){console.log("new value",t),u("number"===typeof t?t:t[0])},style:{width:"calc(100% - 0.5rem)",marginLeft:"0.5rem"}}))))},Re=-1,Te=0,_e=1,De=2,Pe=function(e){var t=e.color,n=e.style,a=e.children;return l.a.createElement("div",{style:Object(i.a)({backgroundColor:t||"black",display:"flex",justifyItems:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"6rem"},n)},l.a.createElement(l.a.Fragment,null,a))},Ue=m.b.div(z||(z=Object(s.a)(["\n  width: calc(100% - 12px);\n  position: relative;\n  box-sizing: border-box;\n  padding: 0 6px;\n  display: flex;\n  align-items: center;\n"]))),Be=m.b.div(L||(L=Object(s.a)(["\n  position: absolute;\n  width: 100%;\n  height: 3px;\n  background-color: #efefef;\n  border-radius: 1em;\n  z-index: 0;\n"]))),Ie=function(e){var t=e.type,n=e.style,a=void 0===n?{}:n,r=Object(i.a)({fill:"white",marginTop:"-1px",width:"75%"},a);return t==Re?l.a.createElement(l.a.Fragment,null):t==Te?l.a.createElement(ae.a,{style:r}):t==_e?l.a.createElement(le.a,{style:r}):t==De?l.a.createElement(ce.a,{style:r}):void 0},Ae=m.b.div(F||(F=Object(s.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 0.5rem 0;\n"]))),Ne=function(e,t,n,a,r,l){var o=Math.abs(n-e),c=Math.abs(a-t),i=r-e,u=l-t,s=Math.sqrt(i*i+u*u)/Math.sqrt(o*o+c*c);return Math.max(0,Math.min(100*s,100))},Je=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],o=function(){var e=Object(r.useContext)(de);if(void 0===e)throw new Error("useStatusState should be used within StatusProvider");return[e.state,e.setState]}(),c=Object(u.a)(o,2),s=c[0],m=c[1],f=Object(r.useState)(3),b=Object(u.a)(f,2),p=b[0],g=b[1],v=Object(r.useState)(!1),j=Object(u.a)(v,2),E=j[0],k=j[1],O=Object(r.useState)(!1),h=Object(u.a)(O,2),y=h[0],x=h[1],C=Object(r.useState)(1),w=Object(u.a)(C,2),S=w[0],z=w[1],L=Object(r.useState)(0),F=Object(u.a)(L,2),M=F[0],R=F[1],T=Object(r.useState)(0),D=Object(u.a)(T,2),P=D[0],U=D[1],B=Object(r.useState)({}),I=Object(u.a)(B,2),J=I[0],W=I[1],q=Object(r.useState)([]),Z=Object(u.a)(q,2),H=Z[0],X=Z[1];Object(r.useEffect)(function(){var e=s.logs;k(e&&e.length>0),X(e),U(0)},[s]);var G=Object(d.e)();Object(r.useEffect)(function(){g(G.getLevel())},[G]);var K=Object(r.useCallback)(function(e){if(H&&!(e>=H.length)){var t=H[e],n=(t.time,t.vehicles),r=t.tasks,l=Array.from(n||[]).map(function(e){var t=e.name,n=e.lat,a=e.lng;return{key:t,color:J[t],size:5,lat:n,lng:a,type:Te}}),o=Array.from(r||[]).map(function(e){var t=e.id,n=e.pick_lat,a=e.pick_lng,r=e.drop_lat,l=e.drop_lng,o=e.status;return[0<=o&&o<=5?{key:"task-".concat(t,"-pick"),color:J[t],size:4,lat:n,lng:a,type:_e}:null,{key:"task-".concat(t,"-drop"),color:J[t],size:4,lat:r,lng:l,type:De}]}).flat().filter(function(e){return null!==e});a([].concat(Object(N.a)(l),Object(N.a)(o)))}},[H,J]);Object(r.useEffect)(function(){K(P)},[P]),Object(r.useEffect)(function(){if(y){var e=1e3/(S||1);console.log("info",e,y,S);var t=setTimeout(function(){U(function(e){return e+1})},e);return function(){clearTimeout(t)}}},[y,S,P]);var Q=Object(r.useCallback)(function(e){if(!(e.length<1)){var t=new kakao.maps.LatLngBounds;e.forEach(function(e){var n=e.lat,a=e.lng;t.extend(new kakao.maps.LatLng(n,a))}),G.setBounds(t)}},[G]);Object(r.useEffect)(function(){if(H&&!(H.length<1)){var e=H.map(function(e){var t,n=e.vehicles,a=e.tasks;return(t=n.map(function(e){return{lat:e.lat,lng:e.lng}})).concat.apply(t,Object(N.a)(a.map(function(e){return[{lat:e.pick_lat,lng:e.pick_lng},{lat:e.drop_lat,lng:e.drop_lng}]})))}).flat();R(H.length-1),Q(e),K(0)}},[H,Q,K]),Object(r.useEffect)(function(){if(H&&!(H.length<1)){var e=Object(N.a)(Array.from(new Set(H.map(function(e){var t=e.vehicles,n=e.tasks;return t.map(function(e){var t=e.name;return"".concat(t)}).concat(n.map(function(e){var t=e.id;return"".concat(t)}))}).flat()))).map(function(e){return Object(A.a)({},e,"#"+Math.random().toString(16).slice(-6))}).reduce(function(e,t){return Object(i.a)({},e,t)},{});W(e)}},[H]);var Y=Object(r.useRef)(null);Object(r.useEffect)(function(){if(Y&&Y.current){var e=Y.current;setTimeout(function(){e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},100)}},[Y,P]);var $=Object(r.useCallback)(function(e){var t=e.time,n=e.vehicles,a=e.tasks,r=e.colors;return l.a.createElement(l.a.Fragment,null,n.filter(function(e){return null!=e.allocated_id}).map(function(e){var n=e.name,o=e.lat,c=e.lng,u=e.allocated_id,s=Array.from(a||[]).filter(function(e){return e.id===u});if(s.length<1)return null;var d=s[0],m=d.id,f=d.status,b=d.pick_lat,p=d.pick_lng,g=d.drop_lat,v=d.drop_lng,j=f>5,E=f>6,k={backgroundColor:"transparent",borderWidth:"1px",borderColor:r[m],borderStyle:"dashed"},O={fill:r[m]};return l.a.createElement(Ae,{className:"pairs",key:"pair-of-".concat(t,"-").concat(m)},l.a.createElement(Pe,{color:f<=5?"transparent":r[m],style:Object(i.a)({justifySelf:"flex-start"},j?{}:k)},l.a.createElement(Ie,{type:_e,style:Object(i.a)({margin:"0 auto"},j?{}:O)})),l.a.createElement(Ue,null,l.a.createElement(Be,{style:j?{backgroundColor:r[m]}:{}}),l.a.createElement("div",{style:{position:"absolute",width:"calc(100% - 32px)",top:0}},l.a.createElement(Pe,{color:r[n],style:{position:"absolute",left:"".concat(Ne(b,p,g,v,o,c),"%"),zIndex:1}},l.a.createElement(Ie,{type:Te,style:{margin:"0 auto"}})))),l.a.createElement(Pe,{color:r[m],style:Object(i.a)({justifySelf:"flex-end"},E?{}:k)},l.a.createElement(Ie,{type:De,style:Object(i.a)({margin:"0 auto"},E?{}:O)})))}))},[]),ee=Object(r.useState)([]),ne=Object(u.a)(ee,2),ae=ne[0],re=ne[1];Object(r.useEffect)(function(){if(H&&!(H.length<1)){var e=H.slice(0,P+1);re(e)}},[H,P]);var le=Object(r.useCallback)(function(){return!ae||ae.length<1?l.a.createElement("center",{style:{position:"absolute",top:"50%",left:0,width:"100%"}},l.a.createElement(ie.a,{color:"neutral",fontSize:2,sx:{translate:"0% -50%",textAlign:"center"}},"\uc7ac\uc0dd\ud560 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")):l.a.createElement(ue.a,{spacing:1},ae.map(function(e){var t=e.time,n=e.vehicles,a=e.tasks;return l.a.createElement("div",{key:"log-".concat(t)},l.a.createElement(_.a,{sx:{marginTop:"0.5rem",marginBottom:"0.25rem"}},l.a.createElement(ie.a,{color:"neutral",fontSize:2},function(e){var t={timeZone:"Asia/Seoul"},n=new Intl.DateTimeFormat("ko-kr",Object(i.a)({dateStyle:"full"},t)).format(e),a=new Intl.DateTimeFormat("ko-kr",Object(i.a)({dayPeriod:"long"},t)).format(e),r=new Intl.DateTimeFormat("ko-kr",Object(i.a)({hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},t)).format(e).split(" ")[1].split(":"),l=Object(u.a)(r,3),o=l[0],c=l[1];return l[2],[n,a,"".concat(o,"\uc2dc ").concat(c,"\ubd84")].join("\n")}(new Date(t)))),l.a.createElement($,{time:t,vehicles:n,tasks:a,colors:J}))}))},[ae,J]);return l.a.createElement(l.a.Fragment,null,n.map(function(e){var t=e.key,n=e.color,a=e.size,r=e.lat,o=e.lng,c=e.type;return l.a.createElement(d.a,{key:t,position:{lat:r,lng:o},ref:function(e){null!=e&&(e.cc.parentElement.className="vehicle-marker")}},l.a.createElement(V,{color:n||"dodgerblue",size:a/p},l.a.createElement(Ie,{type:c})))}),l.a.createElement(Me,{running:y,runable:E,progressMax:M,progressCurrent:P,speed:S,onSelectSpeed:z,onProgressUpdated:U,onClickPlay:function(){return x(!y)},onClickUpload:function(e){var t=e.target.files;if(t&&!(t.length<1)){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){var t=e.target.result;try{var n=JSON.parse(t).logs;m(function(e){return Object(i.a)({},e,{logs:n})}),K(0)}catch(a){window.alert("Wrong JSON file format")}}),a.readAsText(n)}}}),l.a.createElement(te,{ref:Y},l.a.createElement(le,null)))},We=m.b.div(M||(M=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 0.75em;\n  height: 0.75em;\n  background: white;\n  border-width: 0.15rem;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n  box-sizing: border-box;\n  cursor: pointer;\n\n  &:hover {\n    border-color: ",";\n  }\n"])),function(e){return e.selected?"black":"var(--joy-palette-danger-500, #d3232f)"},function(e){return e.size},function(e){return e.selected?"black":"var(--joy-palette-danger-600, #a10e25)"}),qe=m.b.div(R||(R=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Ve=function(e){var t=e.id,n=e.size,a=void 0===n?2:n,r=e.selected,o=void 0!==r&&r,c=e.children,i=e.onMouseEnter,u=e.onMouseDown,s=e.onMouseLeave,d=e.onMouseUp,m=e.onClick;return l.a.createElement(qe,{"data-id":t},l.a.createElement(We,{size:a,selected:o,onMouseEnter:i,onMouseLeave:s,onMouseDown:u,onMouseUp:d,onClick:m},l.a.createElement("div",{className:"icon"},c)))},Ze=n(82),He=n.n(Ze),Xe=n(83),Ge=n.n(Xe),Ke=n(84),Qe=n.n(Ke),Ye=n(85),$e=n.n(Ye),et=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.icon,o=e.onClick;return l.a.createElement(Ce,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,variant:"outlined",size:"32px",onClick:o},r)},tt=function(e){var t=e.editMode,n=e.onModeChanged,a=e.onClickUpload,o=e.onClickDownload,c=function(e){n(e)},i=Object(r.useCallback)(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(et,{title:"\uc810 \ucd94\uac00/\uc0ad\uc81c",active:"add"===t,icon:l.a.createElement(He.a,null),onClick:function(){return c("add")}}),l.a.createElement(et,{title:"\uc810 \uc5f0\uacb0",active:"link"===t,icon:l.a.createElement(Ge.a,null),onClick:function(){return c("link")}}),l.a.createElement(et,{title:"\uc810 \uc774\ub3d9",active:"move"===t,icon:l.a.createElement(Qe.a,null),onClick:function(){return c("move")}}))},[t]),u=Object(r.useCallback)(function(){var e=Object(r.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:"upload-log",style:{width:"100%"}},l.a.createElement("input",{ref:e,style:{display:"none"},id:"upload-log",name:"upload-log",type:"file",accept:".json,application/json",onChange:a}),l.a.createElement(et,{title:"\uc5c5\ub85c\ub4dc",icon:l.a.createElement(ve.a,null),onClick:function(){e.current&&e.current.click()}})))},[a]),s=Object(r.useCallback)(function(){return l.a.createElement(et,{title:"\ub2e4\uc6b4\ub85c\ub4dc",icon:l.a.createElement($e.a,null),onClick:o})},[o]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B,{position:"bottom"},l.a.createElement(i,null),l.a.createElement(U,null),l.a.createElement(u,null),l.a.createElement(s,null)))},nt=function(e,t){var n,a=e.map(function(e){return e.key}),r=function(e){return a.indexOf(e)},l={nodes:e.map(function(e){var t=e.key,n=e.lat,a=e.lng;return{id:r(t),lat:n,lng:a,info:{}}}),edges:t.map(function(e){var t=e.from,n=e.to;return{from:r(t),to:r(n)}})};!function(e,t){var n=document.createElement("a");n.download=e,n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),n.addEventListener("click",function(e){setTimeout(function(){return URL.revokeObjectURL(n.href)},3e4)}),n.click()}("graph-"+(new Date).toISOString()+".json",(n=l,new Blob([JSON.stringify(n,null,2)],{type:"application/json"})))},at=function(){var e=Object(d.e)(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)([]),s=Object(u.a)(c,2),m=s[0],f=s[1],b=Object(r.useState)(1),p=Object(u.a)(b,2),g=p[0],v=p[1],j=Object(r.useState)("add"),E=Object(u.a)(j,2),k=E[0],O=E[1],h=Object(r.useState)([]),y=Object(u.a)(h,2),x=y[0],C=y[1],w=Object(r.useState)(),S=Object(u.a)(w,2),z=S[0],L=S[1],F=Object(r.useCallback)(function(e){return-1!==x.indexOf(e)},[x]),M=Object(r.useMemo)(function(){var e=a.filter(function(e){var t=e.key;return F(t)});return e.length>0?e[0]:null},[a,F]),R=Object(r.useCallback)(function(e){var t=a.filter(function(t){return t.key===e});return t.length>0?t[0]:null},[a]),T=Object(r.useCallback)(function(e){return null!==R(e)},[R]);Object(r.useEffect)(function(){v(e.getLevel())},[e]),Object(r.useEffect)(function(){f(function(e){return e.filter(function(e){var t=e.from,n=e.to;return T(t)&&T(n)})})},[T,f]),Object(r.useEffect)(function(){if(console.log("selected",x),x.length>=2){var e=Object(u.a)(x,2),t=e[0],n=e[1],a=[R(t),R(n)],r=a[0],l=a[1];null!==r&&null!==l&&(function(e,t){f(function(n){return n.filter(function(n){return!(n.from==e.key&&n.to==t.key)}).concat({from:e.key,to:t.key})})}(r,l),L(void 0),C([]))}},[x,R,L]);var _=Object(r.useCallback)(function(e){var t=e.latLng;if("add"===k){var n=t.getLat(),a=t.getLng();o(function(e){var t=Math.random().toString(16).slice(2),r={key:"node-".concat(t),lat:n,lng:a};return console.log("add node",r),[].concat(Object(N.a)(e),[r])})}},[k]),D=Object(r.useCallback)(function(e){},[]),P=Object(r.useCallback)(function(e){var t=e.latLng,n=t.getLat(),a=t.getLng();if("link"===k)L({key:"cursor",lat:n,lng:a});else if("move"===k){if(1!=x.length)return;o(function(e){return e.map(function(e){return x[0]!==e.key?e:Object(i.a)({},e,{lat:n,lng:a})})})}},[k,o,x,L]);Object(r.useEffect)(function(){return e.setCursor("default"),kakao.maps.event.addListener(e,"click",_),kakao.maps.event.addListener(e,"mouseup",D),kakao.maps.event.addListener(e,"mousemove",P),function(){e.setCursor(""),kakao.maps.event.removeListener(e,"click",_),kakao.maps.event.removeListener(e,"mouseup",D),kakao.maps.event.removeListener(e,"mousemove",P)}},[e,_,D,P]);var U=Object(r.useCallback)(function(e){var t=e.target.closest("[data-id]").getAttribute("data-id"),n=e.button;"add"===k?2===n&&o(function(e){return Object(N.a)(e).filter(function(e){return e.key!==t})}):"link"===k?0===n?C(function(e){return e.filter(function(e){return e!=t}).concat(t)}):2===n&&C(function(e){return e.filter(function(e){return e!=t})}):"move"===k&&0===n&&C(function(e){return e.length>0?[]:[t]})},[k,o,C]),B=Object(r.useCallback)(function(e){},[]),I=Object(r.useCallback)(function(){return l.a.createElement(l.a.Fragment,null,"link"===k&&M&&z&&l.a.createElement(d.c,{key:"edge-guide",path:[M,z].map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:"#db4040",strokeOpacity:1,strokeStyle:"dashed"}))},[k,M,z]),A=Object(r.useCallback)(function(){return l.a.createElement(l.a.Fragment,null,a.map(function(e){var t=e.key,n=e.lat,a=e.lng;return l.a.createElement(d.a,{position:{lat:n,lng:a},key:t},l.a.createElement(Ve,{id:t,size:6/g,selected:F(t),onMouseDown:U,onMouseUp:B}))}))},[a,g,F,U,B]),J=Object(r.useCallback)(function(){return l.a.createElement(l.a.Fragment,null,m.map(function(e){var t=e.from,n=e.to,a=[t,n].map(R).filter(function(e){return null!==e});return 2!=a.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(d.c,{key:"edge-".concat(t,"-").concat(n),path:a.map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:"#db4040",strokeOpacity:1,strokeStyle:"solid",onCreate:console.log})}))},[m,R]),W=Object(r.useCallback)(function(t){if(!(t.length<1)){var n=new kakao.maps.LatLngBounds;t.forEach(function(e){var t=e.lat,a=e.lng;n.extend(new kakao.maps.LatLng(t,a))}),e.setBounds(n)}},[e]),q=Object(r.useCallback)(function(e){var t=e.target.files;if(t&&!(t.length<1)){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){var t=e.target.result;try{var n=JSON.parse(t),a=n.nodes,r=n.edges,l=a.map(function(e){var t=e.id,n=e.lat,a=e.lng;return{key:"node-".concat(t),lat:n,lng:a}});o(l),f(r.map(function(e){var t=e.from,n=e.to;return{from:l[t].key,to:l[n].key}})),W(a),console.log(a,r)}catch(c){window.alert("Failed to parse JSON")}}),a.readAsText(n)}},[o,f]),V=Object(r.useCallback)(function(){return nt(a,m)},[a,m]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(J,null),l.a.createElement(I,null),l.a.createElement(A,null),l.a.createElement(tt,{editMode:k||"add",onClickDownload:V,onClickUpload:q,onModeChanged:O}))},rt=n(86),lt=n.n(rt),ot={mode:"view",viewSpeed:1,viewRunning:!1},ct=Object(r.createContext)(void 0),it=function(e){var t=Object(r.useState)(ot),n=Object(u.a)(t,2),a=n[0],o=n[1];return l.a.createElement(ct.Provider,{value:{state:Object(i.a)({},a),setState:o}},l.a.createElement(l.a.Fragment,null,e.children))},ut=function(){var e=Object(r.useContext)(ct);if(void 0===e)throw new Error("useControlState should be used within ControlProvider");return[e.state,e.setState]},st=(n(107),function(e){var t=e.mode,n=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{size:"sm",startDecorator:l.a.createElement(ae.a,null),variant:"view"===t?"solid":"plain",onClick:function(){return n("view")},sx:{borderTopRightRadius:0,borderBottomRightRadius:0}},"Viewer"),l.a.createElement(I.a,{size:"sm",startDecorator:l.a.createElement(lt.a,null),variant:"edit"===t?"solid":"plain",onClick:function(){return n("edit")},sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"Editor"))});function dt(){var e=ut(),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(3),c=Object(u.a)(o,2),s=c[0],d=c[1],m=Object(r.useCallback)(function(){return l.a.createElement(B,{position:"top",gap:0,style:{padding:0,height:"auto"}},l.a.createElement(st,{mode:n.mode,onChange:function(e){a(function(t){return Object(i.a)({},t,{mode:e})})}}))},[n.mode,a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(T,{center:{lat:37.52897,lng:126.917101},level:s,onZoomChanged:function(e){return d(e.getLevel())},style:{width:"100%",height:"100vh",zIndex:0}},l.a.createElement(m,null),"view"==n.mode?l.a.createElement(Je,null):l.a.createElement(at,null)))}var mt=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(me,null,l.a.createElement(it,null,l.a.createElement(dt,null))))},ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),l(e),o(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(mt,null)),ft()},97:function(e,t,n){e.exports=n(109)}},[[97,1,2]]]);
//# sourceMappingURL=main.5a3e928e.chunk.js.map