(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(163)},121:function(e,t,n){},156:function(e,t,n){},161:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(76),l=n.n(c),i=(n(121),n(20)),u=n(4),s=n(10),d=n(27),f=n(12),m=f.b.div(a||(a=Object(s.a)(["\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgb(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n"])));var b,g,p,v,h,j,O,k,E,y,x,w,C,V,S,M,L,z,F,T,D,_,I,R,A,N,B,P,U,W,H=function(e){var t=Object(d.d)({appkey:"44189597732bee11ec3007f7d1464a90",libraries:["services","clusterer"],retries:3}),n=t.loading,a=t.error;return o.a.createElement(o.a.Fragment,null,n||a?o.a.createElement(m,null):o.a.createElement(d.b,e))},J=n(208),Y=f.b.div(b||(b=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  left: calc(0px + 50%);\n  translate: -50% 0%;\n  margin: 0 auto;\n  width: fit-content;\n  height: 42px;\n  place-items: center;\n  padding: 6px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1em;\n  box-sizing: border-box;\n\n  ","\n"])),function(e){return"top"==e.position?Object(f.a)(g||(g=Object(s.a)(["\n          top: 1rem;\n        "]))):Object(f.a)(p||(p=Object(s.a)(["\n          bottom: 1rem;\n        "])))}),q=f.b.div(v||(v=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: ",";\n  margin: 0px auto;\n  place-items: center;\n  box-sizing: border-box;\n"])),function(e){var t=e.gap;return"".concat(t,"rem")}),G=function(){return o.a.createElement(J.a,{orientation:"vertical"})},K=function(e){var t=e.position,n=e.gap,a=void 0===n?.5:n,r=e.style,c=void 0===r?{}:r,l=e.children;return o.a.createElement(Y,{position:t,style:c},o.a.createElement(q,{gap:a},l))},X=n(212),Z=n(14),$=n(202),Q=Object(f.c)(h||(h=Object(s.a)(["\n  from {\n    transform: scale(1.0);\n    opacity: 1.0;\n  }\n  to {\n    transform: scale(2.0);\n    opacity: 0.0;\n  }\n"]))),ee=f.b.div(j||(j=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1em;\n  height: 1em;\n  background: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n\n  ",";\n\n  > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"])),function(e){return e.color},function(e){return e.size},function(e){return e.animate&&Object(f.a)(O||(O=Object(s.a)(["\n      animation: "," 1s ease-in-out infinite;\n    "])),Q)}),te=f.b.div(k||(k=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),ne=function(e){var t=e.color,n=void 0===t?"dodgerblue":t,a=e.size,r=void 0===a?2:a,c=e.children;return o.a.createElement(te,null,o.a.createElement(ee,{color:n,size:r,animate:!0}),o.a.createElement(ee,{color:n,size:r},o.a.createElement("div",{className:"icon"},c)))},ae=n(87),re=n.n(ae),oe=n(83),ce=n.n(oe),le=f.b.div(E||(E=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-width: 280px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  transition: transform 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  z-index: 99999;\n\n  ","\n"])),function(e){return e.fold&&Object(f.a)(y||(y=Object(s.a)(["\n      transform: translateX(-100%);\n    "])))}),ie=f.b.div(x||(x=Object(s.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  outline: 0;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  overflow-y: auto;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),ue=f.b.div(w||(w=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1.25em;\n  height: 100%;\n  right: -1.25em;\n  justify-content: center;\n  align-items: center;\n"]))),se=f.b.div(C||(C=Object(s.a)(["\n  width: 100%;\n  height: 3em;\n  display: flex;\n  padding: 0 2px;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  clip-path: inset(-1em -1em -1em 0px);\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  cursor: pointer;\n"]))),de=function(e){var t=e._ref,n=e.children,a=Object(r.useState)(!0),c=Object(u.a)(a,2),l=c[0],i=c[1],s=Object(r.useCallback)(function(){var e={sx:{width:"100%",fontSize:"1rem"}};return l?o.a.createElement(ce.a,e):o.a.createElement(re.a,e)},[l]);return o.a.createElement(le,{fold:l},o.a.createElement(ie,{ref:t},o.a.createElement(o.a.Fragment,null,n)),o.a.createElement(ue,null,o.a.createElement(se,{onClick:function(e){i(function(e){return!e})}},o.a.createElement(s,null))))},fe=o.a.forwardRef(function(e,t){return o.a.createElement(de,{_ref:t},o.a.createElement(o.a.Fragment,null,e.children))}),me=n(55),be=n.n(me),ge=n(95),pe=n.n(ge),ve=n(52),he=n.n(ve),je={currentTime:null,log:null},Oe=Object(r.createContext)(void 0),ke=function(e){var t=Object(r.useState)(je),n=Object(u.a)(t,2),a=n[0],c=n[1];return o.a.createElement(Oe.Provider,{value:{state:Object(i.a)({},a),setState:c}},o.a.createElement(o.a.Fragment,null,e.children))},Ee=n(205),ye=n(203),xe=n(206),we=n(91),Ce=n.n(we),Ve=n(90),Se=n.n(Ve),Me=n(92),Le=n.n(Me),ze=n(210),Fe=n(209),Te=n(211),De=function(e){var t=e.tooltip,n=void 0===t?void 0:t,a=e.tooltipColor,r=void 0===a?"primary":a,c=e.tooltipPlacement,l=void 0===c?"bottom":c,i=e.tooltipSize,u=void 0===i?"sm":i,s=e.active,d=e.disabled,f=void 0!==d&&d,m=e.loading,b=void 0!==m&&m,g=e.variant,p=void 0===g?"plain":g,v=e.size,h=e.onClick,j=e.children;return o.a.createElement(Fe.a,{arrow:!0,title:n,color:r,placement:l,size:u,variant:p},o.a.createElement(ze.a,{variant:s?"solid":"soft",sx:{"--IconButton-size":v},disabled:f,onClick:h},b?o.a.createElement(Te.a,{color:"primary",size:"sm",value:33,variant:"plain"}):j))},_e=n(89),Ie=n.n(_e),Re=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.disabled,c=void 0!==r&&r,l=e.loading,i=void 0!==l&&l,u=e.icon,s=e.onClick;return o.a.createElement(De,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,disabled:c,loading:i,variant:"outlined",size:"32px",onClick:s},u)},Ae=function(e){var t=e.speed,n=e.onSelectSpeed,a=o.a.useState(null),c=Object(u.a)(a,2),l=c[0],i=c[1],s=Boolean(l),d=function(){i(null)},f=Object(r.useCallback)(function(e){return o.a.createElement(Ee.a,Object.assign({},t===e&&{selected:!0,variant:"soft"},{onClick:function(){return function(e){n(e),d()}(e)}}),"x",e.toFixed(1))},[t]);return o.a.createElement("div",null,o.a.createElement(Re,{title:s?void 0:"\uc7ac\uc0dd \uc18d\ub3c4",onClick:function(e){i(e.currentTarget)},icon:o.a.createElement(Ie.a,null)}),o.a.createElement(ye.a,{anchorEl:l,open:s,onClose:d,color:"primary",size:"sm",variant:"plain"},f(1),f(2),f(5),f(10)))},Ne=f.b.div(V||(V=Object(s.a)(["\n  width: calc(100vw - 600px);\n  width: calc(100svw - 600px);\n  max-width: 480px;\n  padding-left: 0.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n"]))),Be=function(e){var t=e.running,n=e.runable,a=e.progressMax,c=e.progressCurrent,l=e.speed,i=e.expanded,u=e.onSelectSpeed,s=e.onProgressUpdated,d=e.onClickPlay,f=e.onClickExpand,m=Object(r.useCallback)(function(){return t?o.a.createElement(Re,{title:"\uc77c\uc2dc\uc815\uc9c0",onClick:d,icon:o.a.createElement(Se.a,null)}):o.a.createElement(Re,{title:"\uc7ac\uc0dd",disabled:!n,onClick:d,icon:o.a.createElement(Ce.a,null)})},[t,n]),b=Object(r.useCallback)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Re,{title:i?"\ub2eb\uae30":"\uc790\uc138\ud788 \ubcf4\uae30",icon:i?o.a.createElement(he.a,null):o.a.createElement(Le.a,null),onClick:function(){f(!i)}}))},[i,f]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{position:"bottom"},o.a.createElement(m,null),o.a.createElement(Ae,{speed:l,onSelectSpeed:u}),o.a.createElement(G,null),o.a.createElement(Ne,null,o.a.createElement(xe.a,{color:"primary","aria-label":"Timestamp",defaultValue:0,value:c,min:0,max:a,step:1,disabled:!n||t,size:"md",valueLabelDisplay:"off",variant:"solid",onChange:function(e,t){console.log("new value",t),s("number"===typeof t?t:t[0])},style:{width:"calc(100% - 0.5rem)",marginLeft:"0.5rem"}})),o.a.createElement(G,null),o.a.createElement(b,null)))},Pe=n(93),Ue=n.n(Pe),We=(n(155),n(156),(new Date).getTimezoneOffset(),{backgroundColor:"#dcdc33",color:"#1f1f1f",borderRadius:"4px",boxShadow:"1px 1px 0px rgba(0, 0, 0, 0.25)"}),He=function(e){return 0===e?{color:"white",backgroundColor:"gray",opacity:.5}:1===e?{color:"white",backgroundColor:"#0a6bde"}:2===e?{color:"white",backgroundColor:"#dcdc33"}:{}},Je=function(e){var t=e.vehicle_id,n=e.schedules;return{id:"tracks-for-".concat(t),title:t,elements:n.map(function(e){e.load_time;var n=e.start_time,a=e.status,r=e.task_id,o=e.unload_time;return{id:"".concat(t,"-track-").concat(r),title:"#".concat(r),start:new Date(n),end:new Date(o),style:Object(i.a)({},We,He(a))}}),tracks:[]}},Ye=function(e,t){return new Date(e.getTime()+t)},qe=f.b.div(S||(S=Object(s.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  color: #9f9f9f;\n"]))),Ge=function(e){var t=e.time,n=Object(r.useState)(),a=Object(u.a)(n,2),c=a[0],l=a[1],i=Object(r.useState)({start:new Date,current:new Date,end:new Date}),s=Object(u.a)(i,2),d=s[0],f=s[1],m=Object(r.useState)(!1),b=Object(u.a)(m,2),g=b[0],p=b[1],v=Object(r.useState)(t.getFullYear()),h=Object(u.a)(v,2),j=h[0],O=h[1],k=Object(r.useState)(t.getMonth()+1),E=Object(u.a)(k,2),y=E[0],x=E[1],w=Object(r.useState)(t.getDay()),C=Object(u.a)(w,2),V=C[0],S=C[1],M=Object(r.useState)(t.getHours()),L=Object(u.a)(M,2),z=L[0],F=L[1],T=Object(r.useState)(t.getMinutes()),D=Object(u.a)(T,2),_=D[0],I=D[1],R=Object(r.useCallback)(function(e){var t=new Date(j,y-1,V),n=Ye(t,60*e*1e3);return t.toLocaleDateString()==n.toLocaleDateString()},[j,y,V]);Object(r.useEffect)(function(){console.log("Timeline time changed",t),O(t.getFullYear()),x(t.getMonth()+1),S(t.getDate()),F(t.getHours()),I(t.getMinutes())},[t]),Object(r.useEffect)(function(){p(!R(_))},[_]),Object(r.useEffect)(function(){if(!g){console.log("Request schedule");var e="".concat("http://taxim.info/api","/schedule/").concat(j,"/").concat(y,"/").concat(V,"/").concat(z,"/").concat(_,"?vehicles=").concat(10,"&tasks=").concat(130);$.a.get(e).then(function(e){l(e.data)})}},[j,y,V,z,_,g]),Object(r.useEffect)(function(){if(console.log("snapshot",c),c&&c.time){var e=new Date(c.time);f({start:Ye(e,-108e5),current:e,end:Ye(e,324e5)}),p(!1)}else p(!0)},[c]);var A=Object(r.useMemo)(function(){var e=d.start,t=d.current,n=d.end,a=(n.getTime()-e.getTime())/6e5;return console.log("start",e),console.log("end",n),[{id:"minutes",title:t.toLocaleTimeString(),cells:Object(Z.a)(Array(a)).map(function(n,a){var r=Ye(e,6e5*a),o=Ye(r,6e5),c=r.getMinutes();return{id:"header-m-".concat(r.getTime()),title:"",start:r,end:o,style:c==t.getMinutes()?{backgroundColor:"black"}:{}}}),useAsGrid:!0,style:{}}]},[d]),N=Object(r.useCallback)(function(){return c&&c.logs?o.a.createElement(Ue.a,{scale:{start:d.start,end:d.end,zoom:11},timebar:A,tracks:c.logs.map(Je),now:d.current,enableSticky:!0}):o.a.createElement(qe,null,"No Data")},[c,A]);return o.a.createElement(N,null)},Ke=new Map([["V0","#f83cbd"],["V1","#7f209c"],["V2","#3d9630"],["V3","#1dfd57"],["V4","#0a748c"],["V5","#fc193f"],["V6","#188552"],["V7","#7129aa"],["V8","#713fbd"],["V9","#942122"],["V10","#652b94"],["V11","#a61109"],["V12","#32f53b"],["V13","#9f171a"],["V14","#43f02a"],["V15","#a52b5f"],["V16","#b03929"],["V17","#810c76"],["V18","#326f8d"],["V19","#1efd90"],["V20","#9f5c17"],["V21","#18921e"],["V22","#00f7aa"],["V23","#ac2905"],["V24","#837822"],["V25","#20812d"],["V26","#8b1a5e"],["V27","#b55c1d"],["V28","#2076b0"],["V29","#975a26"],["V30","#937213"],["V31","#842156"],["V32","#9c6d36"],["V33","#6cb822"],["V34","#25be30"],["V35","#3b9b41"],["V36","#02b65a"],["V37","#7eb13f"],["V38","#827409"],["V39","#403cbc"],["V40","#255481"],["V41","#70ae06"],["V42","#409f51"],["V43","#202aa9"],["V44","#33811d"],["V45","#0c8439"],["V46","#8b3407"],["V47","#b04060"],["V48","#4738ad"],["V49","#a9511a"],["V50","#438100"],["V51","#ba1f39"],["V52","#90237f"],["V53","#7315a0"],["V54","#03941c"],["V55","#32a647"],["V56","#b2742c"],["V57","#9f2f15"],["V58","#925218"],["V59","#1226b5"],["V60","#921b35"],["V61","#3a1a8e"],["V62","#23810e"],["V63","#572998"],["V64","#1c18bb"],["V65","#a06f1c"],["V66","#b01364"],["V67","#46ac02"],["V68","#ac2329"],["V69","#a26423"],["V70","#3f8b1a"],["V71","#8a5b2e"],["V72","#453c8f"],["V73","#98283a"],["V74","#b83314"],["V75","#313fab"],["V76","#3db578"],["V77","#1c3fbf"],["V78","#403580"],["V79","#2d619d"],["V80","#336c84"],["V81","#8c0f12"],["V82","#3e0ca6"],["V83","#66a62a"],["V84","#a62069"],["V85","#283dab"],["V86","#ae2779"],["V87","#8f0961"],["V88","#ab7737"],["V89","#b7171f"],["V90","#c00129"],["V91","#1b05a2"],["V92","#219514"],["V93","#2e9d51"],["V94","#7b2481"],["V95","#215b87"],["V96","#6e07a4"],["V97","#49ab04"],["V98","#10a772"],["V99","#ae2d52"]]),Xe=n(207),Ze=n(204),$e=n(94),Qe=n.n($e),et=["\uc548\ub155\ud558\uc138\uc694, \ubb34\uc5c7\uc744 \ub3c4\uc640\ub4dc\ub9b4\uae4c\uc694?","\ubb34\uc5c7\uc744 \ub3c4\uc640\ub4dc\ub9b4\uae4c\uc694?","\uc5b4\ub5a4 \uc9c8\ubb38\uc774 \uc788\uc73c\uc2e0\uac00\uc694?","\uc5b4\ub5a4 \uc8fc\uc81c\uc5d0 \ub300\ud574 \uc774\uc57c\uae30\ud574 \ubcf4\uace0 \uc2f6\uc73c\uc2e0\uac00\uc694?","\ub3c4\uc640\ub4dc\ub9b4 \uc77c\uc774 \uc788\uc73c\uc2dc\uba74 \ub9d0\uc500\ud574 \uc8fc\uc138\uc694."],tt=f.b.div(M||(M=Object(s.a)(['\n  padding: 1em 2em;\n  background-color: white;\n  height: calc(100% - 50px);\n  box-sizing: border-box;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: #d1d1d1;\n  }\n\n  .chat_message:has([direction="right"])\n    + .chat_message:has([direction="right"]),\n  .chat_message:has([direction="left"])\n    + .chat_message:has([direction="left"]) {\n    margin-top: 5px;\n  }\n']))),nt=f.b.div(L||(L=Object(s.a)(["\n  display: grid;\n  grid-gap: 0;\n  height: 50px;\n  margin: 0;\n  border-top: 1px solid #efefef;\n  box-shadow: 0 0 5px rgba(128, 128, 128, 0.1);\n  grid-template-columns: 1fr 50px;\n"]))),at=f.b.input(z||(z=Object(s.a)(["\n  height: 100%;\n  position: relative;\n  width: 100%;\n  border: none;\n  outline: none;\n  padding: 0;\n  box-sizing: border-box;\n  vertical-align: top;\n  margin: 0;\n  width: 100%;\n  padding: 1em;\n  color: #1f1f1f;\n"]))),rt=f.b.div(F||(F=Object(s.a)(["\n  position: relative;\n  color: ",";\n  background-color: ",";\n  font-size: 0.85em;\n  line-height: 1.375em;\n  width: fit-content;\n  min-width: 20px;\n  max-width: 90%;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: ","};\n  padding-right: 18px;\n  text-align: start;\n  box-sizing: border-box;\n  border-radius: 25px;\n  border-color: #ccc;\n  border-style: none;\n  outline: none;\n\n  .user-avatar {\n    position: absolute;\n    top: -1em;\n    ","\n  }\n"])),function(e){return e.color||"#3f3f3f"},function(e){return e.backgroundColor||"#eaecef"},function(e){return"left"===e.direction?"calc(18px + 0.25em)":"18px"},function(e){return"left"===e.direction?Object(f.a)(T||(T=Object(s.a)(["\n            left: -0.5em;\n          "]))):Object(f.a)(D||(D=Object(s.a)(["\n            right: -0.5em;\n          "])))}),ot=function(e){var t=e.children,n=e.direction,a="left"===n?{alignItems:"flex-start"}:{alignItems:"flex-end"},r="left"===n;return o.a.createElement(Xe.a,Object.assign({},a,{className:"chat_message"}),o.a.createElement(rt,{direction:n,color:r?"#2f2f2f":"#efefef",backgroundColor:r?"#eaecef":"#3883f3"},o.a.createElement(o.a.Fragment,null,t),r&&o.a.createElement("div",{className:"user-avatar"},o.a.createElement(Ze.a,{alt:"Bot",src:"/bot_image.png",sx:{outline:"3px solid #fff",width:"1.5em",height:"1.5em"}}))))},ct=function(e){var t=e.controlledText,n=void 0===t?"":t,a=e.onTextChange,c=e.onTextSend,l=Object(r.useCallback)(function(){var e=n||"";e.length>0&&c(e)},[n,c]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(nt,null,o.a.createElement(at,{type:"text",placeholder:"\uc5ec\uae30\uc5d0 \uc785\ub825\ud558\uc138\uc694...",value:n,onKeyUp:function(e){"Enter"===e.code&&l()},onChange:function(e){a(e.target.value)}}),o.a.createElement(ze.a,{size:"sm",variant:"plain",sx:{borderRadius:0},onClick:function(){return l()}},o.a.createElement(Qe.a,{fontSize:"small"}))))},lt=function(e){var t=e.messages,n=Object(r.useRef)(null);Object(r.useEffect)(function(){!function(){var e=n.current;null!==e&&e.scrollTo(0,e.scrollHeight)}()},[t]);var a=function(e){var t=e.message,n=t.action,a=t.data;return"focus"===n&&a?o.a.createElement(X.a,{variant:"outlined",size:"sm",sx:{marginTop:"6px"},onClick:function(){alert(a)}},"\uc9c0\ub3c4\uc5d0\uc11c \ud655\uc778\ud558\uae30"):o.a.createElement(o.a.Fragment,null)};return o.a.createElement(tt,{ref:n},o.a.createElement(Xe.a,{direction:"column",justifyContent:"flex-end",alignItems:"stretch",spacing:2,sx:{height:"max-content",minHeight:"100%",paddingTop:"1em",paddingBottom:"1em",boxSizing:"border-box"}},t.map(function(e,t){var n=e.text,r=e.from;return e.action,e.data,o.a.createElement(ot,{key:"chat_message_".concat(t),direction:"bot"===r?"left":"right"},o.a.createElement(o.a.Fragment,null,n,o.a.createElement(a,{message:e})))})))},it=-1,ut=0,st=1,dt=2,ft=function(e){var t=e.color,n=e.style,a=e.children,c=e.tooltip,l=void 0===c?null:c,s=e.onClick,d=Object(r.useState)(!1),f=Object(u.a)(d,2),m=f[0],b=f[1];return o.a.createElement("div",{style:Object(i.a)({backgroundColor:t||"black",display:"flex",justifyItems:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"6rem"},n),onMouseOver:function(){return b(!0)},onMouseLeave:function(){return b(!1)},onClick:s||null},o.a.createElement(o.a.Fragment,null,a),o.a.createElement(o.a.Fragment,null,null!=l&&m&&l))},mt=f.b.div(_||(_=Object(s.a)(["\n  width: calc(100% - 12px);\n  position: relative;\n  box-sizing: border-box;\n  padding: 0 6px;\n  display: flex;\n  align-items: center;\n"]))),bt=f.b.div(I||(I=Object(s.a)(["\n  position: absolute;\n  width: 100%;\n  height: 3px;\n  background-color: #efefef;\n  border-radius: 1em;\n  z-index: 0;\n"]))),gt=f.b.div(R||(R=Object(s.a)(["\n  position: absolute;\n  bottom: calc(-32px / 2 - -8px);\n  font-size: 12px;\n  left: calc(32px / 2);\n  width: fit-content;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: ",";\n  color: white;\n  border-radius: 3px;\n  padding: 2px 6px;\n  box-sizing: border-box;\n  min-width: 32px;\n  transform: translateX(-50%);\n  text-align: center;\n  box-shadow: 0 0 3px rgba(128, 128, 128, 0.2);\n"])),function(e){return e.color}),pt=function(e){var t=e.type,n=e.style,a=void 0===n?{}:n,r=Object(i.a)({fill:"white",marginTop:"-1px",width:"75%"},a);return t==it?o.a.createElement(o.a.Fragment,null):t==ut?o.a.createElement(be.a,{style:r}):t==st?o.a.createElement(pe.a,{style:r}):t==dt?o.a.createElement(he.a,{style:r}):void 0},vt=f.b.div(A||(A=Object(s.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 0.5rem 0;\n"]))),ht=function(e,t,n,a,r,o){var c=Math.abs(n-e),l=Math.abs(a-t),i=r-e,u=o-t,s=Math.sqrt(i*i+u*u)/Math.sqrt(c*c+l*l);return Math.max(0,Math.min(100*s,100))},jt=f.b.div(N||(N=Object(s.a)(["\n  position: fixed;\n  width: 100%;\n  bottom: 0;\n  left: 0;\n  background: white;\n  height: 300px;\n  transform: ",";\n  transition: transform 300ms ease-in-out;\n  box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);\n"])),function(e){return e.expand?"translateY(0px)":"translateY(300px)"}),Ot=f.b.div(B||(B=Object(s.a)(["\n  position: relative;\n  width: 100%;\n"]))),kt=f.b.div(P||(P=Object(s.a)(["\n  position: absolute;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n"]))),Et=new Date("2020-08-29 06:00"),yt=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(r.useContext)(Oe);if(void 0===e)throw new Error("useStatusState should be used within StatusProvider");return[e.state,e.setState]}(),l=Object(u.a)(c,2),s=l[0],f=(l[1],Object(r.useState)(3)),m=Object(u.a)(f,2),b=m[0],g=m[1],p=Object(r.useState)(!1),v=Object(u.a)(p,2),h=v[0],j=v[1],O=Object(r.useState)(!1),k=Object(u.a)(O,2),E=k[0],y=k[1],x=Object(r.useState)(1),w=Object(u.a)(x,2),C=w[0],V=w[1],S=Object(r.useState)(0),M=Object(u.a)(S,2),L=M[0],z=(M[1],Object(r.useState)(0)),F=Object(u.a)(z,2),T=F[0],D=F[1],_=Object(r.useState)(0),I=Object(u.a)(_,2),R=I[0],A=I[1],N=Object(r.useState)(),B=Object(u.a)(N,2),P=B[0],U=B[1],W=Object(r.useState)(new Map),H=Object(u.a)(W,2),J=H[0],Y=H[1],q=Object(r.useState)(Et),G=Object(u.a)(q,2),K=G[0],X=G[1];Object(r.useEffect)(function(){var e=setTimeout(function(){y(!0)},1e3);return function(){clearTimeout(e)}},[]),Object(r.useEffect)(function(){var e=new Date(Et.getTime()+60*R*1e3);console.log("elapsed",R),console.log("time",e),X(e);var t,n={year:(t=e).getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()},a=n.year,r=n.month,o=n.day,c=n.hour,l=n.minute,i="".concat("http://taxim.info/api","/log/").concat(a,"/").concat(r,"/").concat(o,"/").concat(c,"/").concat(l,"?vehicles=").concat(10,"&tasks=").concat(130);$.a.get(i).then(function(e){U(e.data)})},[R]),Object(r.useEffect)(function(){var e=s.log;j(null!==P),U(e)},[s]);var Q=Object(d.e)();Object(r.useEffect)(function(){g(Q.getLevel())},[Q]),Object(r.useEffect)(function(){Q.setLevel(b)},[Q,b]),Object(r.useEffect)(function(){if(P){P.time;var e=P.vehicles,t=P.tasks,n=Array.from(e||[]).map(function(e){var t=e.name,n=e.lat,a=e.lng;return{key:t,color:Ke.get(t)||"#cfcfcf",size:5,lat:n,lng:a,type:ut}}),r=Array.from(t||[]).map(function(e){var t=e.id,n=e.pick_lat,a=e.pick_lng,r=e.drop_lat,o=e.drop_lng,c=e.status;return[0<=c&&c<=5?{key:"task-".concat(t,"-pick"),color:"#1d35ef66",size:4,lat:n,lng:a,type:st}:null,{key:"task-".concat(t,"-drop"),color:"#4d75ef66",size:4,lat:r,lng:o,type:dt}]}).flat().filter(function(e){return null!==e});console.log("markers[v]",n),console.log("markers[t]",r),a([].concat(Object(Z.a)(n),Object(Z.a)(r))),Y(function(t){for(var n=new Map(t),a=0,r=Array.from(e||[]);a<r.length;a++){var o=r[a],c=o.name;n.set(c,o)}return n})}},[P]),Object(r.useEffect)(function(){P&&Y(function(e){for(var t=Array.from(new Set(P.vehicles.map(function(e){return e.name||""}))),n=new Map(e),a=0,r=t;a<r.length;a++){var o=r[a];n.set(o,{name:o,lat:-1,lng:-1,allocated_id:null})}return n})},[P]),Object(r.useEffect)(function(){if(E){var e=1e3/(C||1);console.log("info",e,E,C);var t=setTimeout(function(){A(function(e){return e+5})},e);return function(){clearTimeout(t)}}},[E,C,R]);var ee=Object(r.useCallback)(function(e){if(!(e.length<1)){var t=new kakao.maps.LatLngBounds;e.forEach(function(e){var n=e.lat,a=e.lng;t.extend(new kakao.maps.LatLng(n,a))}),Q.setBounds(t)}},[Q]);Object(r.useEffect)(function(){ee([{lat:37.6299601,lng:126.8629739},{lat:37.4712457,lng:127.1006907}])},[]);var te=Object(r.useCallback)(function(e){var t=e.lat,n=e.lng;Q.panTo(new kakao.maps.LatLng(t,n))},[Q]),ae=function(e){var t=e.vehicle,n=e.tasks,a=t.name,r=t.lat,c=t.lng,l=(t.allocated_id,o.a.createElement(gt,{color:Ke.get(a)},a));if(n.length<1){var u={backgroundColor:"transparent",borderWidth:"1px",borderColor:"gray",borderStyle:"dashed"};return o.a.createElement(o.a.Fragment,null,o.a.createElement(vt,{className:"pairs",key:"log-info-".concat(a)},o.a.createElement(ft,{color:"transparent",style:Object(i.a)({justifySelf:"flex-start"},u)}),o.a.createElement(mt,null,o.a.createElement(bt,{style:{borderTop:"dashed 2px ".concat(Ke.get(a)),height:"auto",background:"transparent",borderRadius:0}}),o.a.createElement("div",{style:{position:"absolute",width:"calc(100% - 32px)",top:0}},o.a.createElement(ft,{key:"logicon-".concat(a),color:Ke.get(a),style:{position:"absolute",left:"50%",transition:"all 300ms ease",zIndex:1,backgroundColor:"white",borderWidth:"1px",borderColor:Ke.get(a),borderStyle:"dashed"},tooltip:l},o.a.createElement(pt,{type:ut,style:{margin:"0 auto",fill:Ke.get(a)}})))),o.a.createElement(ft,{color:"transparent",style:Object(i.a)({justifySelf:"flex-end"},u)})))}var s=n[0],d=(s.id,s.status),f=s.pick_lat,m=s.pick_lng,b=s.drop_lat,g=s.drop_lng,p=d>5,v=d>6,h={backgroundColor:"transparent",borderWidth:"1px",borderColor:Ke.get(a),borderStyle:"dashed"},j={borderWidth:"1px",borderColor:"transparent",borderStyle:"solid"},O={fill:Ke.get(a)};return o.a.createElement(vt,{className:"pairs",key:"log-info-".concat(a)},o.a.createElement(ft,{color:d<=5?"transparent":Ke.get(a),style:Object(i.a)({justifySelf:"flex-start",cursor:"pointer"},p?j:h),onClick:function(){te({lat:f,lng:m})}},o.a.createElement(pt,{type:st,style:Object(i.a)({margin:"0 auto"},p?{}:O)})),o.a.createElement(mt,null,o.a.createElement(bt,{style:p?{backgroundColor:Ke.get(a)}:{}}),o.a.createElement("div",{style:{position:"absolute",width:"calc(100% - 32px)",top:0}},o.a.createElement(ft,{key:"logicon-".concat(a),color:Ke.get(a),style:{position:"absolute",left:"".concat(ht(f,m,b,g,r,c),"%"),transition:"all 300ms ease",cursor:"pointer",zIndex:1},tooltip:l,onClick:function(){te({lat:r,lng:c})}},o.a.createElement(pt,{type:ut,style:{margin:"0 auto"}})))),o.a.createElement(ft,{color:Ke.get(a),style:Object(i.a)({justifySelf:"flex-end",cursor:"pointer"},v?j:h),onClick:function(){te({lat:b,lng:g})}},o.a.createElement(pt,{type:dt,style:Object(i.a)({margin:"0 auto"},v?{}:O)})))},re=(Object(r.useCallback)(function(e){e.time;var t=e.vehicles,n=e.tasks;return o.a.createElement(o.a.Fragment,null,Array.from(t.values()).map(function(e){return e}).map(function(e){e.name,e.lat,e.lng;var t=e.allocated_id,a=Array.from(n||[]).filter(function(e){return e.id===t});return o.a.createElement(ae,{vehicle:e,tasks:a})}))},[te,J]),Object(r.useState)(!0)),oe=Object(u.a)(re,2),ce=oe[0],le=oe[1],ie=Object(r.useState)(""),ue=Object(u.a)(ie,2),se=ue[0],de=ue[1],me=Object(r.useState)([{text:et[Math.floor(Math.random()*et.length)],from:"bot",action:"nothing"}]),be=Object(u.a)(me,2),ge=be[0],pe=be[1],ve=function(e){pe(function(t){return t.concat(e)})};return o.a.createElement(o.a.Fragment,null,n.map(function(e){var t=e.key,n=e.color,a=e.size,r=e.lat,c=e.lng,l=e.type;return o.a.createElement(d.a,{key:"marker-".concat(t),position:{lat:r,lng:c},ref:function(e){null!=e&&(e.cc.parentElement.className="vehicle-marker")}},o.a.createElement(ne,{color:n||"dodgerblue",size:a/b},o.a.createElement(pt,{type:l})))}),o.a.createElement(jt,{expand:ce},o.a.createElement(Ot,null,o.a.createElement(Be,{running:E,runable:h,progressMax:L,progressCurrent:T,speed:C,expanded:ce,onSelectSpeed:V,onProgressUpdated:function(e){return D(5*R)},onClickPlay:function(){return y(!E)},onClickExpand:le})),o.a.createElement(kt,null,o.a.createElement(Ge,{time:K}))),o.a.createElement(fe,null,o.a.createElement(lt,{messages:ge}),o.a.createElement(ct,{controlledText:se,onTextChange:function(e){return de(e)},onTextSend:function(){console.log(se),ve({text:se,from:"user"}),$.a.post("".concat("http://taxim.info/api","/chat"),se).then(function(e){var t=e.data;if(t){var n=t.text,a=t.action,r=t.data;ve({text:n,from:"bot",action:a,data:r})}}),de("")}})))},xt=f.b.div(U||(U=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 0.75em;\n  height: 0.75em;\n  background: white;\n  border-width: 0.15rem;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n  box-sizing: border-box;\n  cursor: pointer;\n\n  &:hover {\n    border-color: ",";\n  }\n"])),function(e){var t=e.selected,n=e.color;return t?"black":void 0===n?"#d3232f":n},function(e){return e.size},function(e){var t=e.selected,n=e.color;return t?"black":void 0===n?"#a10e25":n}),wt=f.b.div(W||(W=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Ct=function(e){var t=e.id,n=e.size,a=void 0===n?2:n,r=e.selected,c=void 0!==r&&r,l=e.color,i=e.children,u=e.onMouseEnter,s=e.onMouseDown,d=e.onMouseLeave,f=e.onMouseUp,m=e.onClick;return o.a.createElement(wt,{"data-id":t},o.a.createElement(xt,{size:a,color:l,selected:c,onMouseEnter:u,onMouseLeave:d,onMouseDown:s,onMouseUp:f,onClick:m},o.a.createElement("div",{className:"icon"},i)))},Vt=n(96),St=n.n(Vt),Mt=n(97),Lt=n.n(Mt),zt=n(98),Ft=n.n(zt),Tt=n(99),Dt=n.n(Tt),_t=n(100),It=n.n(_t),Rt=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.icon,c=e.onClick;return o.a.createElement(De,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,variant:"outlined",size:"32px",onClick:c},r)},At=function(e){var t=e.editMode,n=e.onModeChanged,a=e.onClickUpload,c=e.onClickDownload,l=function(e){n(e)},i=Object(r.useCallback)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,{title:"\uc810 \ucd94\uac00/\uc0ad\uc81c",active:"add"===t,icon:o.a.createElement(St.a,null),onClick:function(){return l("add")}}),o.a.createElement(Rt,{title:"\uc810 \uc5f0\uacb0",active:"link"===t,icon:o.a.createElement(Lt.a,null),onClick:function(){return l("link")}}),o.a.createElement(Rt,{title:"\uc810 \uc774\ub3d9",active:"move"===t,icon:o.a.createElement(Ft.a,null),onClick:function(){return l("move")}}))},[t]),u=Object(r.useCallback)(function(){var e=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{htmlFor:"upload-log",style:{width:"100%"}},o.a.createElement("input",{ref:e,style:{display:"none"},id:"upload-log",name:"upload-log",type:"file",accept:".json,application/json",onChange:a}),o.a.createElement(Rt,{title:"\uc5c5\ub85c\ub4dc",icon:o.a.createElement(Dt.a,null),onClick:function(){e.current&&e.current.click()}})))},[a]),s=Object(r.useCallback)(function(){return o.a.createElement(Rt,{title:"\ub2e4\uc6b4\ub85c\ub4dc",icon:o.a.createElement(It.a,null),onClick:c})},[c]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{position:"bottom"},o.a.createElement(i,null),o.a.createElement(G,null),o.a.createElement(u,null),o.a.createElement(s,null)))};function Nt(e){return"#"+e.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}function Bt(e){for(var t=Object(Z.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t}var Pt=n(29),Ut=n(30),Wt=function(){function e(t){Object(Pt.a)(this,e),this.nodes=void 0,this.parentIdx=void 0,this.nodes=t,this.parentIdx=new Map}return Object(Ut.a)(e,[{key:"hasKey",value:function(e){return e in this.parentIdx}},{key:"find",value:function(e){var t=this.parentIdx.get(e);if(t&&e!==t){var n=this.find(t);return this.parentIdx.set(e,n),n}return this.parentIdx.set(e,e),e}},{key:"merge",value:function(e,t){var n=this.find(e),a=this.find(t);this.parentIdx.set(n,a)}},{key:"keys",value:function(){return Array.from(this.parentIdx.keys())}}]),e}();function Ht(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Yt=function(e,t){var n,a=e.map(function(e){return e.key}),r=function(e){return a.indexOf(e)},o={nodes:e.map(function(e){var t=e.key,n=e.lat,a=e.lng;return{id:r(t),lat:n,lng:a,info:{}}}),edges:t.map(function(e){var t=e.from,n=e.to;return{from:r(t),to:r(n)}})};!function(e,t){var n=document.createElement("a");n.download=e,n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),n.addEventListener("click",function(e){setTimeout(function(){return URL.revokeObjectURL(n.href)},3e4)}),n.click()}("graph-"+(new Date).toISOString()+".json",(n=o,new Blob([JSON.stringify(n,null,2)],{type:"application/json"})))},qt=function(){var e=Object(d.e)(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)([]),s=Object(u.a)(l,2),f=s[0],m=s[1],b=Object(r.useState)([]),g=Object(u.a)(b,2),p=g[0],v=g[1],h=Object(r.useState)(1),j=Object(u.a)(h,2),O=(j[0],j[1]),k=Object(r.useState)("add"),E=Object(u.a)(k,2),y=E[0],x=E[1],w=Object(r.useState)([]),C=Object(u.a)(w,2),V=C[0],S=C[1],M=Object(r.useState)(),L=Object(u.a)(M,2),z=L[0],F=L[1],T=Object(r.useState)([]),D=Object(u.a)(T,2),_=D[0],I=D[1],R=Object(r.useState)(new Map),A=Object(u.a)(R,2),N=A[0],B=A[1],P=Object(r.useMemo)(function(){return console.log("_visibleEdges",_),_.map(function(e){return e.from,e.to,e})},[_]);Object(r.useEffect)(function(){var e=p.filter(function(e){var t,n=e.from,a=e.to,r=Ht(f);try{for(r.s();!(t=r.n()).done;){var o=t.value.key;if(n===o||a===o)return!0}}catch(c){r.e(c)}finally{r.f()}return!1});I(e)},[f,p]),Object(r.useEffect)(function(){var e,t=new Wt(a),n=Ht(p);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.merge(r.from,r.to)}}catch(h){n.e(h)}finally{n.f()}var o,c=new Map,l=new Map,i=Ht(t.keys());try{for(i.s();!(o=i.n()).done;){var u=o.value;l.set(u,Nt(Bt([64*Math.random(),128*Math.random(),64*Math.random()+128].map(Math.round))))}}catch(h){i.e(h)}finally{i.f()}var s,d=Ht(p);try{for(d.s();!(s=d.n()).done;){var f=s.value,m=f.from,b=f.to,g=t.find(m),v=t.find(b);c.set(m,l.get(g)),c.set(b,l.get(v))}}catch(h){d.e(h)}finally{d.f()}console.log("set graph colors",c),B(c)},[a,p]);var U=Object(r.useCallback)(function(){var t=e.getBounds(),n=e.getLevel(),a=[t.getNorthEast(),t.getSouthWest()],r=a[0],o=a[1],c=o.getLat(),l=o.getLng(),i=r.getLat(),u=r.getLng();return{level:n,top:c,left:l,bottom:i,right:u,width:u-l,height:i-c}},[e]),W=Object(r.useCallback)(function(e){var t=U(),n=t.top,a=t.left,r=t.bottom,o=t.right,c=t.width,l=t.height,i=t.level,u=e.filter(function(e){var t=e.lat,c=e.lng;return n<=t&&t<=r&&a<=c&&c<=o}).map(function(e){var t=e.key,n=e.lat,a=e.lng;return{id:t,key:t,lat:n,lng:a,grid:"".concat(Math.round(n/(c/100)),",").concat(Math.round(a/(l/100)))}}),s=Object(Z.a)(Array.from(new Map(u.map(function(e){var t=e.key;return[e.grid,{id:t,key:t,lat:e.lat,lng:e.lng}]})).values()));console.log("Bounds:",n,a,r,o),console.log("Nodes(Grid)",u,s),console.log("Bounds (width, height)",r-n,o-a,i),console.log("Set New Temporal Nodes",s),m(s)},[U]),H=Object(r.useCallback)(function(e){return-1!==V.indexOf(e)},[V]),J=Object(r.useMemo)(function(){var e=a.filter(function(e){var t=e.key;return H(t)});return e.length>0?e[0]:null},[a,H]),Y=function(e,t){var n,a=Ht(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.key===e)return r}}catch(o){a.e(o)}finally{a.f()}return null},q=Object(r.useCallback)(function(e){return Y(e,a)},[a]),G=Object(r.useCallback)(function(e){var t=null!==Y(e,f);return console.log("isNodeVisible",e,t),t},[f]);Object(r.useEffect)(function(){O(e.getLevel()),setTimeout(function(){e.relayout()},0)},[e]),Object(r.useEffect)(function(){var e=function(e){return null!==q(e)};v(function(t){return t.filter(function(t){var n=t.from,a=t.to;return e(n)&&e(a)})})},[q,v]),Object(r.useEffect)(function(){if(console.log("selected",V),V.length>=2){var e=Object(u.a)(V,2),t=e[0],n=e[1],a=[q(t),q(n)],r=a[0],o=a[1];null!==r&&null!==o&&(function(e,t){v(function(n){return n.filter(function(n){return!(n.from==e.key&&n.to==t.key)}).concat({from:e.key,to:t.key})})}(r,o),F(void 0),S([]))}},[V,q,F]);var K=Object(r.useCallback)(function(e){var t=e.latLng;if("add"===y){var n=t.getLat(),a=t.getLng();console.log("Map Clicked",n,a),c(function(e){var t=Math.random().toString(16).slice(2),r={key:"node-".concat(t),lat:n,lng:a};return console.log("add node",r),[].concat(Object(Z.a)(e),[r])})}},[y]),X=Object(r.useCallback)(function(e){},[]),$=Object(r.useCallback)(function(e){var t=e.latLng,n=t.getLat(),a=t.getLng();if("link"===y)F({key:"cursor",lat:n,lng:a});else if("move"===y){if(1!=V.length)return;c(function(e){return e.map(function(e){return V[0]!==e.key?e:Object(i.a)({},e,{lat:n,lng:a})})})}},[y,c,V,F]);Object(r.useEffect)(function(){var t=function(){return W(a)};return kakao.maps.event.addListener(e,"idle",t),function(){kakao.maps.event.addListener(e,"idle",t)}},[e,a]),Object(r.useEffect)(function(){W(a)},[a]),Object(r.useEffect)(function(){return e.setCursor("default"),kakao.maps.event.addListener(e,"click",K),kakao.maps.event.addListener(e,"mouseup",X),kakao.maps.event.addListener(e,"mousemove",$),function(){e.setCursor(""),kakao.maps.event.removeListener(e,"click",K),kakao.maps.event.removeListener(e,"mouseup",X),kakao.maps.event.removeListener(e,"mousemove",$)}},[e,K,X,$]);var Q=Object(r.useCallback)(function(e){var t=e.target.closest("[data-id]");if(t){var n=t.getAttribute("data-id")||"",a=e.button;"add"===y?2===a&&c(function(e){return Object(Z.a)(e).filter(function(e){return e.key!==n})}):"link"===y?0===a?S(function(e){return e.filter(function(e){return e!=n}).concat(n)}):2===a&&S(function(e){return e.filter(function(e){return e!=n})}):"move"===y&&0===a&&S(function(e){return e.length>0?[]:[n]})}},[y,c,S]),ee=Object(r.useCallback)(function(e){},[]),te=Object(r.useMemo)(function(){return o.a.createElement(o.a.Fragment,null,"link"===y&&J&&z&&o.a.createElement(d.c,{key:"edge-guide",path:[J,z].map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:"#db4040",strokeOpacity:1,strokeStyle:"dashed"}))},[y,J,z]),ne=Object(r.useCallback)(function(){var e=U().level;return o.a.createElement(o.a.Fragment,null,f.map(function(t){var n=t.key,a=t.lat,r=t.lng;return o.a.createElement(d.a,{position:{lat:a,lng:r},key:n},o.a.createElement(Ct,{id:n,color:N.get(n),size:6/e,selected:H(n),onMouseDown:Q,onMouseUp:ee}))}))},[f,N,U,H,Q,ee]),ae=Object(r.useCallback)(function(){return console.log("graph colors",N),o.a.createElement(o.a.Fragment,null,P.map(function(e){var t=e.from,n=e.to,a=[t,n].map(q).filter(function(e){return null!==e});return 2!=a.length?o.a.createElement(o.a.Fragment,null):o.a.createElement(d.c,{key:"edge-".concat(t,"-").concat(n),path:a.map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:N.get(t),strokeOpacity:1,strokeStyle:"solid"})}))},[P,N,q,G]),re=Object(r.useCallback)(function(t){if(!(t.length<1)){var n=new kakao.maps.LatLngBounds;t.forEach(function(e){var t=e.lat,a=e.lng;n.extend(new kakao.maps.LatLng(t,a))}),e.setBounds(n),setTimeout(function(){e.relayout()},0)}},[e]),oe=Object(r.useCallback)(function(e){var t=e.target.files;if(t&&!(t.length<1)){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){var t=e.target.result;try{var n=JSON.parse(t),a=n.nodes,r=n.edges,o=a.map(function(e){var t=e.id,n=e.lat,a=e.lng;return{key:"node-".concat(t),lat:n,lng:a}});c(o),v(r.map(function(e){var t=e.from,n=e.to;return{from:o[t].key,to:o[n].key}})),re(a)}catch(l){window.alert("Failed to parse JSON")}}),a.readAsText(n)}},[c,v]),ce=Object(r.useCallback)(function(){return Yt(a,p)},[a,p]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,null),te,o.a.createElement(ne,null),o.a.createElement(At,{editMode:y||"add",onClickDownload:ce,onClickUpload:oe,onModeChanged:x}))},Gt=n(101),Kt=n.n(Gt),Xt={mode:"view",viewSpeed:1,viewRunning:!1},Zt=Object(r.createContext)(void 0),$t=function(e){var t=Object(r.useState)(Xt),n=Object(u.a)(t,2),a=n[0],c=n[1];return o.a.createElement(Zt.Provider,{value:{state:Object(i.a)({},a),setState:c}},o.a.createElement(o.a.Fragment,null,e.children))},Qt=function(){var e=Object(r.useContext)(Zt);if(void 0===e)throw new Error("useControlState should be used within ControlProvider");return[e.state,e.setState]},en=(n(161),function(e){var t=e.mode,n=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(X.a,{size:"sm",startDecorator:o.a.createElement(be.a,null),variant:"view"===t?"solid":"plain",onClick:function(){return n("view")},sx:{borderTopRightRadius:0,borderBottomRightRadius:0}},"Viewer"),o.a.createElement(X.a,{size:"sm",startDecorator:o.a.createElement(Kt.a,null),variant:"edit"===t?"solid":"plain",onClick:function(){return n("edit")},sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"Editor"))});function tn(){var e=Qt(),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(3),l=Object(u.a)(c,2),s=l[0],d=l[1],f=Object(r.useCallback)(function(){return o.a.createElement(K,{position:"top",gap:0,style:{padding:0,height:"auto"}},o.a.createElement(en,{mode:n.mode,onChange:function(e){a(function(t){return Object(i.a)({},t,{mode:e})})}}))},[n.mode,a]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{center:{lat:37.52897,lng:126.917101},level:s,onZoomChanged:function(e){return d(e.getLevel())},style:{width:"100%",height:"100vh",zIndex:0}},o.a.createElement(f,null),"view"==n.mode?o.a.createElement(yt,null):o.a.createElement(qt,null)))}var nn=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(ke,null,o.a.createElement($t,null,o.a.createElement(tn,null))))},an=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,214)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)})};l.a.createRoot(document.getElementById("root")).render(o.a.createElement(nn,null)),an()}},[[114,1,2]]]);
//# sourceMappingURL=main.8bdd88a9.chunk.js.map