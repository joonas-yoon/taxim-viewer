(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),l=n(64),c=n.n(l),i=(n(106),n(17)),u=n(3),s=n(11),d=n(25),f=n(12),m=f.b.div(a||(a=Object(s.a)(["\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgb(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n"])));var b,p,g,v,h,k,j,O,y,E,x,w,C,S,L,M,z,F,I=function(e){var t=Object(d.d)({appkey:"44189597732bee11ec3007f7d1464a90",libraries:["services","clusterer"],retries:3}),n=t.loading,a=t.error;return o.a.createElement(o.a.Fragment,null,n||a?o.a.createElement(m,null):o.a.createElement(d.b,e))},T=n(153),A=f.b.div(b||(b=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  left: calc(0px + 50%);\n  translate: -50% 0%;\n  margin: 0 auto;\n  width: fit-content;\n  height: 42px;\n  place-items: center;\n  padding: 6px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1em;\n  box-sizing: border-box;\n\n  ","\n"])),function(e){return"top"==e.position?Object(f.a)(p||(p=Object(s.a)(["\n          top: 1rem;\n        "]))):Object(f.a)(g||(g=Object(s.a)(["\n          bottom: 1rem;\n        "])))}),R=f.b.div(v||(v=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: ",";\n  margin: 0px auto;\n  place-items: center;\n  box-sizing: border-box;\n"])),function(e){var t=e.gap;return"".concat(t,"rem")}),_=function(){return o.a.createElement(T.a,{orientation:"vertical"})},N=function(e){var t=e.position,n=e.gap,a=void 0===n?.5:n,r=e.style,l=void 0===r?{}:r,c=e.children;return o.a.createElement(A,{position:t,style:l},o.a.createElement(R,{gap:a},c))},B=n(158),D=n(2),P=n(9),U=Object(f.c)(h||(h=Object(s.a)(["\n  from {\n    transform: scale(1.0);\n    opacity: 1.0;\n  }\n  to {\n    transform: scale(2.0);\n    opacity: 0.0;\n  }\n"]))),W=f.b.div(k||(k=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1em;\n  height: 1em;\n  background: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n\n  ",";\n\n  > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"])),function(e){return e.color},function(e){return e.size},function(e){return e.animate&&Object(f.a)(j||(j=Object(s.a)(["\n      animation: "," 1s ease-in-out infinite;\n    "])),U)}),J=f.b.div(O||(O=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),V=function(e){var t=e.color,n=void 0===t?"dodgerblue":t,a=e.size,r=void 0===a?2:a,l=e.children;return o.a.createElement(J,null,o.a.createElement(W,{color:n,size:r,animate:!0}),o.a.createElement(W,{color:n,size:r},o.a.createElement("div",{className:"icon"},l)))},q=n(75),X=n.n(q),Z=n(71),G=n.n(Z),K=f.b.div(y||(y=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-width: 280px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  transition: transform 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  z-index: 99999;\n\n  ","\n"])),function(e){return e.fold&&Object(f.a)(E||(E=Object(s.a)(["\n      transform: translateX(-100%);\n    "])))}),$=f.b.div(x||(x=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  outline: 0;\n  margin: 0;\n  padding: 1em 2em;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  overflow-y: auto;\n"]))),H=f.b.div(w||(w=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 1.25em;\n  height: 100%;\n  right: -1.25em;\n  justify-content: center;\n  align-items: center;\n"]))),Q=f.b.div(C||(C=Object(s.a)(["\n  width: 100%;\n  height: 3em;\n  display: flex;\n  padding: 0 2px;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  clip-path: inset(-1em -1em -1em 0px);\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  cursor: pointer;\n"]))),Y=function(e){var t=e._ref,n=e.children,a=Object(r.useState)(!0),l=Object(u.a)(a,2),c=l[0],i=l[1],s=Object(r.useCallback)(function(){var e={sx:{width:"100%",fontSize:"1rem"}};return c?o.a.createElement(G.a,e):o.a.createElement(X.a,e)},[c]);return o.a.createElement(K,{fold:c},o.a.createElement($,{ref:t},o.a.createElement(o.a.Fragment,null,n)),o.a.createElement(H,null,o.a.createElement(Q,{onClick:function(e){i(function(e){return!e})}},o.a.createElement(s,null))))},ee=o.a.forwardRef(function(e,t){return o.a.createElement(Y,{_ref:t},o.a.createElement(o.a.Fragment,null,e.children))}),te=n(45),ne=n.n(te),ae=n(80),re=n.n(ae),oe=n(81),le=n.n(oe),ce=n(157),ie=n(152),ue={currentTime:null,logs:[]},se=Object(r.createContext)(void 0),de=function(e){var t=Object(r.useState)(ue),n=Object(u.a)(t,2),a=n[0],l=n[1];return o.a.createElement(se.Provider,{value:{state:Object(i.a)({},a),setState:l}},o.a.createElement(o.a.Fragment,null,e.children))},fe=n(150),me=n(149),be=n(151),pe=n(44),ge=n.n(pe),ve=n(79),he=n.n(ve),ke=n(78),je=n.n(ke),Oe=n(155),ye=n(154),Ee=n(156),xe=function(e){var t=e.tooltip,n=void 0===t?void 0:t,a=e.tooltipColor,r=void 0===a?"primary":a,l=e.tooltipPlacement,c=void 0===l?"bottom":l,i=e.tooltipSize,u=void 0===i?"sm":i,s=e.active,d=e.disabled,f=void 0!==d&&d,m=e.loading,b=void 0!==m&&m,p=e.variant,g=void 0===p?"plain":p,v=e.size,h=e.onClick,k=e.children;return o.a.createElement(ye.a,{arrow:!0,title:n,color:r,placement:c,size:u,variant:g},o.a.createElement(Oe.a,{variant:s?"solid":"soft",sx:{"--IconButton-size":v},disabled:f,onClick:h},b?o.a.createElement(Ee.a,{color:"primary",size:"sm",value:33,variant:"plain"}):k))},we=n(77),Ce=n.n(we),Se=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.disabled,l=void 0!==r&&r,c=e.loading,i=void 0!==c&&c,u=e.icon,s=e.onClick;return o.a.createElement(xe,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,disabled:l,loading:i,variant:"outlined",size:"32px",onClick:s},u)},Le=function(e){var t=e.speed,n=e.onSelectSpeed,a=o.a.useState(null),l=Object(u.a)(a,2),c=l[0],i=l[1],s=Boolean(c),d=function(){i(null)},f=Object(r.useCallback)(function(e){return o.a.createElement(fe.a,Object.assign({},t===e&&{selected:!0,variant:"soft"},{onClick:function(){return function(e){n(e),d()}(e)}}),"x",e.toFixed(1))},[t]);return o.a.createElement("div",null,o.a.createElement(Se,{title:s?void 0:"\uc7ac\uc0dd \uc18d\ub3c4",onClick:function(e){i(e.currentTarget)},icon:o.a.createElement(Ce.a,null)}),o.a.createElement(me.a,{anchorEl:c,open:s,onClose:d,color:"primary",size:"sm",variant:"plain"},f(1),f(2),f(5),f(10)))},Me=f.b.div(S||(S=Object(s.a)(["\n  width: calc(100vw - 600px);\n  width: calc(100svw - 600px);\n  max-width: 480px;\n  padding-left: 0.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n"]))),ze=function(e){var t=e.running,n=e.runable,a=e.progressMax,l=e.progressCurrent,c=e.speed,i=e.onSelectSpeed,u=e.onProgressUpdated,s=e.onClickPlay,d=e.onClickUpload,f=Object(r.useCallback)(function(){return t?o.a.createElement(Se,{title:"\uc77c\uc2dc\uc815\uc9c0",onClick:s,icon:o.a.createElement(je.a,null)}):o.a.createElement(Se,{title:"\uc7ac\uc0dd",disabled:!n,onClick:s,icon:o.a.createElement(he.a,null)})},[t,n]),m=Object(r.useCallback)(function(){var e=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{htmlFor:"upload-log",style:{width:"32px"}},o.a.createElement("input",{ref:e,style:{display:"none"},id:"upload-log",name:"upload-log",type:"file",accept:".json,application/json",onChange:d}),o.a.createElement(Se,{title:"\uc5c5\ub85c\ub4dc",icon:o.a.createElement(ge.a,null),onClick:function(){e.current&&e.current.click()}})))},[d]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{position:"bottom"},o.a.createElement(m,null),o.a.createElement(f,null),o.a.createElement(Le,{speed:c,onSelectSpeed:i}),o.a.createElement(_,null),o.a.createElement(Me,null,o.a.createElement(be.a,{color:"primary","aria-label":"Timestamp",defaultValue:0,value:l,min:0,max:a,step:1,disabled:!n||t,size:"md",valueLabelDisplay:"off",variant:"solid",onChange:function(e,t){console.log("new value",t),u("number"===typeof t?t:t[0])},style:{width:"calc(100% - 0.5rem)",marginLeft:"0.5rem"}}))))},Fe=function(){return Ie(Te([64*Math.random(),128*Math.random(),64*Math.random()+128].map(Math.round)))};function Ie(e){return"#"+e.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}function Te(e){for(var t=Object(P.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t}var Ae,Re,_e=-1,Ne=0,Be=1,De=2,Pe=function(e){var t=e.color,n=e.style,a=e.children,l=e.tooltip,c=void 0===l?null:l,s=e.onClick,d=Object(r.useState)(!1),f=Object(u.a)(d,2),m=f[0],b=f[1];return o.a.createElement("div",{style:Object(i.a)({backgroundColor:t||"black",display:"flex",justifyItems:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"6rem"},n),onMouseOver:function(){return b(!0)},onMouseLeave:function(){return b(!1)},onClick:s||null},o.a.createElement(o.a.Fragment,null,a),o.a.createElement(o.a.Fragment,null,null!=c&&m&&c))},Ue=f.b.div(L||(L=Object(s.a)(["\n  width: calc(100% - 12px);\n  position: relative;\n  box-sizing: border-box;\n  padding: 0 6px;\n  display: flex;\n  align-items: center;\n"]))),We=f.b.div(M||(M=Object(s.a)(["\n  position: absolute;\n  width: 100%;\n  height: 3px;\n  background-color: #efefef;\n  border-radius: 1em;\n  z-index: 0;\n"]))),Je=f.b.div(z||(z=Object(s.a)(["\n  position: absolute;\n  bottom: calc(-32px / 2 - -8px);\n  font-size: 12px;\n  left: calc(32px / 2);\n  width: fit-content;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: ",";\n  color: white;\n  border-radius: 3px;\n  padding: 2px 6px;\n  box-sizing: border-box;\n  min-width: 32px;\n  transform: translateX(-50%);\n  text-align: center;\n  box-shadow: 0 0 3px rgba(128, 128, 128, 0.2);\n"])),function(e){return e.color}),Ve=function(e){var t=e.type,n=e.style,a=void 0===n?{}:n,r=Object(i.a)({fill:"white",marginTop:"-1px",width:"75%"},a);return t==_e?o.a.createElement(o.a.Fragment,null):t==Ne?o.a.createElement(ne.a,{style:r}):t==Be?o.a.createElement(re.a,{style:r}):t==De?o.a.createElement(le.a,{style:r}):void 0},qe=f.b.div(F||(F=Object(s.a)(["\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  padding: 0.5rem 0;\n"]))),Xe=function(e,t,n,a,r,o){var l=Math.abs(n-e),c=Math.abs(a-t),i=r-e,u=o-t,s=Math.sqrt(i*i+u*u)/Math.sqrt(l*l+c*c);return Math.max(0,Math.min(100*s,100))},Ze=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],l=function(){var e=Object(r.useContext)(se);if(void 0===e)throw new Error("useStatusState should be used within StatusProvider");return[e.state,e.setState]}(),c=Object(u.a)(l,2),s=c[0],f=c[1],m=Object(r.useState)(3),b=Object(u.a)(m,2),p=b[0],g=b[1],v=Object(r.useState)(!1),h=Object(u.a)(v,2),k=h[0],j=h[1],O=Object(r.useState)(!1),y=Object(u.a)(O,2),E=y[0],x=y[1],w=Object(r.useState)(1),C=Object(u.a)(w,2),S=C[0],L=C[1],M=Object(r.useState)(0),z=Object(u.a)(M,2),F=z[0],I=z[1],A=Object(r.useState)(0),R=Object(u.a)(A,2),_=R[0],N=R[1],B=Object(r.useState)({}),U=Object(u.a)(B,2),W=U[0],J=U[1],q=Object(r.useState)([]),X=Object(u.a)(q,2),Z=X[0],G=X[1],K=Object(r.useState)(new Map),$=Object(u.a)(K,2),H=$[0],Q=$[1];Object(r.useEffect)(function(){var e=s.logs;j(e&&e.length>0),G(e),N(0)},[s]);var Y=Object(d.e)();Object(r.useEffect)(function(){g(Y.getLevel())},[Y]),Object(r.useEffect)(function(){Y.setLevel(p)},[Y,p]);var te=Object(r.useCallback)(function(e){if(Z&&!(e>=Z.length)){var t=Z[e],n=(t.time,t.vehicles),r=t.tasks,o=Array.from(n||[]).map(function(e){var t=e.name,n=e.lat,a=e.lng;return{key:t,color:W[t],size:5,lat:n,lng:a,type:Ne}}),l=Array.from(r||[]).map(function(e){var t=e.id,n=e.pick_lat,a=e.pick_lng,r=e.drop_lat,o=e.drop_lng,l=e.status;return[0<=l&&l<=5?{key:"task-".concat(t,"-pick"),color:W[t],size:4,lat:n,lng:a,type:Be}:null,{key:"task-".concat(t,"-drop"),color:W[t],size:4,lat:r,lng:o,type:De}]}).flat().filter(function(e){return null!==e});a([].concat(Object(P.a)(o),Object(P.a)(l))),Q(function(e){for(var t=new Map(e),a=0,r=Array.from(n||[]);a<r.length;a++){var o=r[a],l=o.name;t.set(l,o)}return t})}},[Z,W]);Object(r.useEffect)(function(){Z&&Q(function(e){for(var t=Array.from(new Set(Z.map(function(e){return e.vehicles.map(function(e){return e.name||""})}).reduce(function(e,t){return[].concat(Object(P.a)(e),Object(P.a)(t))},[]))),n=new Map(e),a=0,r=t;a<r.length;a++){var o=r[a];n.set(o,{name:o,lat:-1,lng:-1,allocated_id:null})}return n})},[Z]),Object(r.useEffect)(function(){te(_)},[_]),Object(r.useEffect)(function(){if(E){var e=1e3/(S||1);console.log("info",e,E,S);var t=setTimeout(function(){N(function(e){return e+1})},e);return function(){clearTimeout(t)}}},[E,S,_]);var ne=Object(r.useCallback)(function(e){if(!(e.length<1)){var t=new kakao.maps.LatLngBounds;e.forEach(function(e){var n=e.lat,a=e.lng;t.extend(new kakao.maps.LatLng(n,a))}),Y.setBounds(t)}},[Y]);Object(r.useEffect)(function(){if(Z&&!(Z.length<1)){var e=Z.map(function(e){var t,n=e.vehicles,a=e.tasks;return(t=n.map(function(e){return{lat:e.lat,lng:e.lng}})).concat.apply(t,Object(P.a)(a.map(function(e){return[{lat:e.pick_lat,lng:e.pick_lng},{lat:e.drop_lat,lng:e.drop_lng}]})))}).flat();I(Z.length-1),ne(e),te(0)}},[Z,ne,te]),Object(r.useEffect)(function(){if(Z&&!(Z.length<1)){var e=Object(P.a)(Array.from(new Set(Z.map(function(e){var t=e.vehicles,n=e.tasks;return t.map(function(e){var t=e.name;return"".concat(t)}).concat(n.map(function(e){var t=e.id;return"".concat(t)}))}).flat()))).map(function(e){return Object(D.a)({},e,Fe())}).reduce(function(e,t){return Object(i.a)({},e,t)},{});J(e)}},[Z]);var ae=Object(r.useCallback)(function(e){var t=e.lat,n=e.lng;Y.panTo(new kakao.maps.LatLng(t,n))},[Y]),re=function(e){var t=e.vehicle,n=e.tasks,a=e.colors,r=t.name,l=t.lat,c=t.lng,u=(t.allocated_id,o.a.createElement(Je,{color:a[r]},r));if(n.length<1){var s={backgroundColor:"transparent",borderWidth:"1px",borderColor:"gray",borderStyle:"dashed"};return o.a.createElement(o.a.Fragment,null,o.a.createElement(qe,{className:"pairs",key:"log-info-".concat(r)},o.a.createElement(Pe,{color:"transparent",style:Object(i.a)({justifySelf:"flex-start"},s)}),o.a.createElement(Ue,null,o.a.createElement(We,{style:{borderTop:"dashed 2px ".concat(a[r]),height:"auto",background:"transparent",borderRadius:0}}),o.a.createElement("div",{style:{position:"absolute",width:"calc(100% - 32px)",top:0}},o.a.createElement(Pe,{key:"logicon-".concat(r),color:a[r],style:{position:"absolute",left:"50%",transition:"all 300ms ease",zIndex:1,backgroundColor:"white",borderWidth:"1px",borderColor:a[r],borderStyle:"dashed"},tooltip:u},o.a.createElement(Ve,{type:Ne,style:{margin:"0 auto",fill:a[r]}})))),o.a.createElement(Pe,{color:"transparent",style:Object(i.a)({justifySelf:"flex-end"},s)})))}var d=n[0],f=(d.id,d.status),m=d.pick_lat,b=d.pick_lng,p=d.drop_lat,g=d.drop_lng,v=f>5,h=f>6,k={backgroundColor:"transparent",borderWidth:"1px",borderColor:a[r],borderStyle:"dashed"},j={borderWidth:"1px",borderColor:"transparent",borderStyle:"solid"},O={fill:a[r]};return o.a.createElement(qe,{className:"pairs",key:"log-info-".concat(r)},o.a.createElement(Pe,{color:f<=5?"transparent":a[r],style:Object(i.a)({justifySelf:"flex-start",cursor:"pointer"},v?j:k),onClick:function(){ae({lat:m,lng:b})}},o.a.createElement(Ve,{type:Be,style:Object(i.a)({margin:"0 auto"},v?{}:O)})),o.a.createElement(Ue,null,o.a.createElement(We,{style:v?{backgroundColor:a[r]}:{}}),o.a.createElement("div",{style:{position:"absolute",width:"calc(100% - 32px)",top:0}},o.a.createElement(Pe,{key:"logicon-".concat(r),color:a[r],style:{position:"absolute",left:"".concat(Xe(m,b,p,g,l,c),"%"),transition:"all 300ms ease",cursor:"pointer",zIndex:1},tooltip:u,onClick:function(){ae({lat:l,lng:c})}},o.a.createElement(Ve,{type:Ne,style:{margin:"0 auto"}})))),o.a.createElement(Pe,{color:a[r],style:Object(i.a)({justifySelf:"flex-end",cursor:"pointer"},h?j:k),onClick:function(){ae({lat:p,lng:g})}},o.a.createElement(Ve,{type:De,style:Object(i.a)({margin:"0 auto"},h?{}:O)})))},oe=Object(r.useCallback)(function(e){e.time;var t=e.vehicles,n=e.tasks,a=e.colors;return o.a.createElement(o.a.Fragment,null,Array.from(t.values()).map(function(e){return e}).map(function(e){e.name,e.lat,e.lng;var t=e.allocated_id,r=Array.from(n||[]).filter(function(e){return e.id===t});return o.a.createElement(re,{vehicle:e,tasks:r,colors:a})}))},[ae,H]),le=Object(r.useState)([]),ue=Object(u.a)(le,2),de=ue[0],fe=ue[1];Object(r.useEffect)(function(){if(Z&&!(Z.length<1)){var e=Z.slice(0,_+1);fe(e)}},[Z,_]);var me=Object(r.useCallback)(function(){if(!de||de.length<1)return o.a.createElement("center",{style:{position:"absolute",top:"50%",left:0,width:"100%"}},o.a.createElement(ce.a,{color:"neutral",fontSize:2,sx:{translate:"0% -50%",textAlign:"center"}},"\uc7ac\uc0dd\ud560 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."));var e=de[de.length-1],t=e.time,n=e.tasks;return o.a.createElement(ie.a,{spacing:1},o.a.createElement("div",{key:"log-".concat(t)},o.a.createElement(T.a,{sx:{marginTop:"0.5rem",marginBottom:"0.25rem"}},o.a.createElement(ce.a,{color:"neutral",fontSize:2},function(e){var t={timeZone:"Asia/Seoul"},n=new Intl.DateTimeFormat("ko-kr",Object(i.a)({dateStyle:"full"},t)).format(e),a=new Intl.DateTimeFormat("ko-kr",Object(i.a)({dayPeriod:"long"},t)).format(e),r=new Intl.DateTimeFormat("ko-kr",Object(i.a)({hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},t)).format(e).split(" ")[1].split(":"),o=Object(u.a)(r,3),l=o[0],c=o[1];return o[2],[n,a,"".concat(l,"\uc2dc ").concat(c,"\ubd84")].join("\n")}(new Date(t)))),o.a.createElement(oe,{time:t,vehicles:H,tasks:n,colors:W})))},[de,W,H]);return o.a.createElement(o.a.Fragment,null,n.map(function(e){var t=e.key,n=e.color,a=e.size,r=e.lat,l=e.lng,c=e.type;return o.a.createElement(d.a,{key:"marker-".concat(t),position:{lat:r,lng:l},ref:function(e){null!=e&&(e.cc.parentElement.className="vehicle-marker")}},o.a.createElement(V,{color:n||"dodgerblue",size:a/p},o.a.createElement(Ve,{type:c})))}),o.a.createElement(ze,{running:E,runable:k,progressMax:F,progressCurrent:_,speed:S,onSelectSpeed:L,onProgressUpdated:N,onClickPlay:function(){return x(!E)},onClickUpload:function(e){var t=e.target.files;if(t&&!(t.length<1)){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){var t=e.target.result;try{var n=JSON.parse(t).logs;f(function(e){return Object(i.a)({},e,{logs:n})}),te(0)}catch(a){window.alert("Wrong JSON file format")}}),a.readAsText(n)}}}),o.a.createElement(ee,null,o.a.createElement(me,null)))},Ge=f.b.div(Ae||(Ae=Object(s.a)(["\n  position: absolute;\n  display: flex;\n  width: 0.75em;\n  height: 0.75em;\n  background: white;\n  border-width: 0.15rem;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ",";\n  box-sizing: border-box;\n  cursor: pointer;\n\n  &:hover {\n    border-color: ",";\n  }\n"])),function(e){var t=e.selected,n=e.color;return t?"black":void 0===n?"#d3232f":n},function(e){return e.size},function(e){var t=e.selected,n=e.color;return t?"black":void 0===n?"#a10e25":n}),Ke=f.b.div(Re||(Re=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),$e=function(e){var t=e.id,n=e.size,a=void 0===n?2:n,r=e.selected,l=void 0!==r&&r,c=e.color,i=e.children,u=e.onMouseEnter,s=e.onMouseDown,d=e.onMouseLeave,f=e.onMouseUp,m=e.onClick;return o.a.createElement(Ke,{"data-id":t},o.a.createElement(Ge,{size:a,color:c,selected:l,onMouseEnter:u,onMouseLeave:d,onMouseDown:s,onMouseUp:f,onClick:m},o.a.createElement("div",{className:"icon"},i)))},He=n(82),Qe=n.n(He),Ye=n(83),et=n.n(Ye),tt=n(84),nt=n.n(tt),at=n(85),rt=n.n(at),ot=function(e){var t=e.title,n=e.active,a=void 0!==n&&n,r=e.icon,l=e.onClick;return o.a.createElement(xe,{tooltip:t,tooltipColor:"primary",tooltipPlacement:"top",active:a,variant:"outlined",size:"32px",onClick:l},r)},lt=function(e){var t=e.editMode,n=e.onModeChanged,a=e.onClickUpload,l=e.onClickDownload,c=function(e){n(e)},i=Object(r.useCallback)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ot,{title:"\uc810 \ucd94\uac00/\uc0ad\uc81c",active:"add"===t,icon:o.a.createElement(Qe.a,null),onClick:function(){return c("add")}}),o.a.createElement(ot,{title:"\uc810 \uc5f0\uacb0",active:"link"===t,icon:o.a.createElement(et.a,null),onClick:function(){return c("link")}}),o.a.createElement(ot,{title:"\uc810 \uc774\ub3d9",active:"move"===t,icon:o.a.createElement(nt.a,null),onClick:function(){return c("move")}}))},[t]),u=Object(r.useCallback)(function(){var e=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{htmlFor:"upload-log",style:{width:"100%"}},o.a.createElement("input",{ref:e,style:{display:"none"},id:"upload-log",name:"upload-log",type:"file",accept:".json,application/json",onChange:a}),o.a.createElement(ot,{title:"\uc5c5\ub85c\ub4dc",icon:o.a.createElement(ge.a,null),onClick:function(){e.current&&e.current.click()}})))},[a]),s=Object(r.useCallback)(function(){return o.a.createElement(ot,{title:"\ub2e4\uc6b4\ub85c\ub4dc",icon:o.a.createElement(rt.a,null),onClick:l})},[l]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{position:"bottom"},o.a.createElement(i,null),o.a.createElement(_,null),o.a.createElement(u,null),o.a.createElement(s,null)))},ct=n(86),it=n(87),ut=function(){function e(t){Object(ct.a)(this,e),this.nodes=void 0,this.parentIdx=void 0,this.nodes=t,this.parentIdx=new Map}return Object(it.a)(e,[{key:"hasKey",value:function(e){return e in this.parentIdx}},{key:"find",value:function(e){var t=this.parentIdx.get(e);if(t&&e!==t){var n=this.find(t);return this.parentIdx.set(e,n),n}return this.parentIdx.set(e,e),e}},{key:"merge",value:function(e,t){var n=this.find(e),a=this.find(t);this.parentIdx.set(n,a)}},{key:"keys",value:function(){return Array.from(this.parentIdx.keys())}}]),e}();function st(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ft=function(e,t){var n,a=e.map(function(e){return e.key}),r=function(e){return a.indexOf(e)},o={nodes:e.map(function(e){var t=e.key,n=e.lat,a=e.lng;return{id:r(t),lat:n,lng:a,info:{}}}),edges:t.map(function(e){var t=e.from,n=e.to;return{from:r(t),to:r(n)}})};!function(e,t){var n=document.createElement("a");n.download=e,n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),n.addEventListener("click",function(e){setTimeout(function(){return URL.revokeObjectURL(n.href)},3e4)}),n.click()}("graph-"+(new Date).toISOString()+".json",(n=o,new Blob([JSON.stringify(n,null,2)],{type:"application/json"})))},mt=function(){var e=Object(d.e)(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],l=n[1],c=Object(r.useState)([]),s=Object(u.a)(c,2),f=s[0],m=s[1],b=Object(r.useState)([]),p=Object(u.a)(b,2),g=p[0],v=p[1],h=Object(r.useState)(1),k=Object(u.a)(h,2),j=(k[0],k[1]),O=Object(r.useState)("add"),y=Object(u.a)(O,2),E=y[0],x=y[1],w=Object(r.useState)([]),C=Object(u.a)(w,2),S=C[0],L=C[1],M=Object(r.useState)(),z=Object(u.a)(M,2),F=z[0],I=z[1],T=Object(r.useState)([]),A=Object(u.a)(T,2),R=A[0],_=A[1],N=Object(r.useState)(new Map),B=Object(u.a)(N,2),D=B[0],U=B[1],W=Object(r.useMemo)(function(){return console.log("_visibleEdges",R),R.map(function(e){return e.from,e.to,e})},[R]);Object(r.useEffect)(function(){var e=g.filter(function(e){var t,n=e.from,a=e.to,r=st(f);try{for(r.s();!(t=r.n()).done;){var o=t.value.key;if(n===o||a===o)return!0}}catch(l){r.e(l)}finally{r.f()}return!1});_(e)},[f,g]),Object(r.useEffect)(function(){var e,t=new ut(a),n=st(g);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.merge(r.from,r.to)}}catch(h){n.e(h)}finally{n.f()}var o,l=new Map,c=new Map,i=st(t.keys());try{for(i.s();!(o=i.n()).done;){var u=o.value;c.set(u,Fe())}}catch(h){i.e(h)}finally{i.f()}var s,d=st(g);try{for(d.s();!(s=d.n()).done;){var f=s.value,m=f.from,b=f.to,p=t.find(m),v=t.find(b);l.set(m,c.get(p)),l.set(b,c.get(v))}}catch(h){d.e(h)}finally{d.f()}console.log("set graph colors",l),U(l)},[a,g]);var J=Object(r.useCallback)(function(){var t=e.getBounds(),n=e.getLevel(),a=[t.getNorthEast(),t.getSouthWest()],r=a[0],o=a[1],l=o.getLat(),c=o.getLng(),i=r.getLat(),u=r.getLng();return{level:n,top:l,left:c,bottom:i,right:u,width:u-c,height:i-l}},[e]),V=Object(r.useCallback)(function(e){var t=J(),n=t.top,a=t.left,r=t.bottom,o=t.right,l=t.width,c=t.height,i=t.level,u=e.filter(function(e){var t=e.lat,l=e.lng;return n<=t&&t<=r&&a<=l&&l<=o}).map(function(e){var t=e.key,n=e.lat,a=e.lng;return{id:t,key:t,lat:n,lng:a,grid:"".concat(Math.round(n/(l/100)),",").concat(Math.round(a/(c/100)))}}),s=Object(P.a)(Array.from(new Map(u.map(function(e){var t=e.key;return[e.grid,{id:t,key:t,lat:e.lat,lng:e.lng}]})).values()));console.log("Bounds:",n,a,r,o),console.log("Nodes(Grid)",u,s),console.log("Bounds (width, height)",r-n,o-a,i),console.log("Set New Temporal Nodes",s),m(s)},[J]),q=Object(r.useCallback)(function(e){return-1!==S.indexOf(e)},[S]),X=Object(r.useMemo)(function(){var e=a.filter(function(e){var t=e.key;return q(t)});return e.length>0?e[0]:null},[a,q]),Z=function(e,t){var n,a=st(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.key===e)return r}}catch(o){a.e(o)}finally{a.f()}return null},G=Object(r.useCallback)(function(e){return Z(e,a)},[a]),K=Object(r.useCallback)(function(e){var t=null!==Z(e,f);return console.log("isNodeVisible",e,t),t},[f]);Object(r.useEffect)(function(){j(e.getLevel()),setTimeout(function(){e.relayout()},0)},[e]),Object(r.useEffect)(function(){var e=function(e){return null!==G(e)};v(function(t){return t.filter(function(t){var n=t.from,a=t.to;return e(n)&&e(a)})})},[G,v]),Object(r.useEffect)(function(){if(console.log("selected",S),S.length>=2){var e=Object(u.a)(S,2),t=e[0],n=e[1],a=[G(t),G(n)],r=a[0],o=a[1];null!==r&&null!==o&&(function(e,t){v(function(n){return n.filter(function(n){return!(n.from==e.key&&n.to==t.key)}).concat({from:e.key,to:t.key})})}(r,o),I(void 0),L([]))}},[S,G,I]);var $=Object(r.useCallback)(function(e){var t=e.latLng;if("add"===E){var n=t.getLat(),a=t.getLng();console.log("Map Clicked",n,a),l(function(e){var t=Math.random().toString(16).slice(2),r={key:"node-".concat(t),lat:n,lng:a};return console.log("add node",r),[].concat(Object(P.a)(e),[r])})}},[E]),H=Object(r.useCallback)(function(e){},[]),Q=Object(r.useCallback)(function(e){var t=e.latLng,n=t.getLat(),a=t.getLng();if("link"===E)I({key:"cursor",lat:n,lng:a});else if("move"===E){if(1!=S.length)return;l(function(e){return e.map(function(e){return S[0]!==e.key?e:Object(i.a)({},e,{lat:n,lng:a})})})}},[E,l,S,I]);Object(r.useEffect)(function(){var t=function(){return V(a)};return kakao.maps.event.addListener(e,"idle",t),function(){kakao.maps.event.addListener(e,"idle",t)}},[e,a]),Object(r.useEffect)(function(){V(a)},[a]),Object(r.useEffect)(function(){return e.setCursor("default"),kakao.maps.event.addListener(e,"click",$),kakao.maps.event.addListener(e,"mouseup",H),kakao.maps.event.addListener(e,"mousemove",Q),function(){e.setCursor(""),kakao.maps.event.removeListener(e,"click",$),kakao.maps.event.removeListener(e,"mouseup",H),kakao.maps.event.removeListener(e,"mousemove",Q)}},[e,$,H,Q]);var Y=Object(r.useCallback)(function(e){var t=e.target.closest("[data-id]");if(t){var n=t.getAttribute("data-id")||"",a=e.button;"add"===E?2===a&&l(function(e){return Object(P.a)(e).filter(function(e){return e.key!==n})}):"link"===E?0===a?L(function(e){return e.filter(function(e){return e!=n}).concat(n)}):2===a&&L(function(e){return e.filter(function(e){return e!=n})}):"move"===E&&0===a&&L(function(e){return e.length>0?[]:[n]})}},[E,l,L]),ee=Object(r.useCallback)(function(e){},[]),te=Object(r.useMemo)(function(){return o.a.createElement(o.a.Fragment,null,"link"===E&&X&&F&&o.a.createElement(d.c,{key:"edge-guide",path:[X,F].map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:"#db4040",strokeOpacity:1,strokeStyle:"dashed"}))},[E,X,F]),ne=Object(r.useCallback)(function(){var e=J().level;return o.a.createElement(o.a.Fragment,null,f.map(function(t){var n=t.key,a=t.lat,r=t.lng;return o.a.createElement(d.a,{position:{lat:a,lng:r},key:n},o.a.createElement($e,{id:n,color:D.get(n),size:6/e,selected:q(n),onMouseDown:Y,onMouseUp:ee}))}))},[f,D,J,q,Y,ee]),ae=Object(r.useCallback)(function(){return console.log("graph colors",D),o.a.createElement(o.a.Fragment,null,W.map(function(e){var t=e.from,n=e.to,a=[t,n].map(G).filter(function(e){return null!==e});return 2!=a.length?o.a.createElement(o.a.Fragment,null):o.a.createElement(d.c,{key:"edge-".concat(t,"-").concat(n),path:a.map(function(e){return{lat:e.lat,lng:e.lng}}),strokeWeight:3,strokeColor:D.get(t),strokeOpacity:1,strokeStyle:"solid"})}))},[W,D,G,K]),re=Object(r.useCallback)(function(t){if(!(t.length<1)){var n=new kakao.maps.LatLngBounds;t.forEach(function(e){var t=e.lat,a=e.lng;n.extend(new kakao.maps.LatLng(t,a))}),e.setBounds(n),setTimeout(function(){e.relayout()},0)}},[e]),oe=Object(r.useCallback)(function(e){var t=e.target.files;if(t&&!(t.length<1)){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){var t=e.target.result;try{var n=JSON.parse(t),a=n.nodes,r=n.edges,o=a.map(function(e){var t=e.id,n=e.lat,a=e.lng;return{key:"node-".concat(t),lat:n,lng:a}});l(o),v(r.map(function(e){var t=e.from,n=e.to;return{from:o[t].key,to:o[n].key}})),re(a)}catch(c){window.alert("Failed to parse JSON")}}),a.readAsText(n)}},[l,v]),le=Object(r.useCallback)(function(){return ft(a,g)},[a,g]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,null),te,o.a.createElement(ne,null),o.a.createElement(lt,{editMode:E||"add",onClickDownload:le,onClickUpload:oe,onModeChanged:x}))},bt=n(88),pt=n.n(bt),gt={mode:"view",viewSpeed:1,viewRunning:!1},vt=Object(r.createContext)(void 0),ht=function(e){var t=Object(r.useState)(gt),n=Object(u.a)(t,2),a=n[0],l=n[1];return o.a.createElement(vt.Provider,{value:{state:Object(i.a)({},a),setState:l}},o.a.createElement(o.a.Fragment,null,e.children))},kt=function(){var e=Object(r.useContext)(vt);if(void 0===e)throw new Error("useControlState should be used within ControlProvider");return[e.state,e.setState]},jt=(n(109),function(e){var t=e.mode,n=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(B.a,{size:"sm",startDecorator:o.a.createElement(ne.a,null),variant:"view"===t?"solid":"plain",onClick:function(){return n("view")},sx:{borderTopRightRadius:0,borderBottomRightRadius:0}},"Viewer"),o.a.createElement(B.a,{size:"sm",startDecorator:o.a.createElement(pt.a,null),variant:"edit"===t?"solid":"plain",onClick:function(){return n("edit")},sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"Editor"))});function Ot(){var e=kt(),t=Object(u.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)(3),c=Object(u.a)(l,2),s=c[0],d=c[1],f=Object(r.useCallback)(function(){return o.a.createElement(N,{position:"top",gap:0,style:{padding:0,height:"auto"}},o.a.createElement(jt,{mode:n.mode,onChange:function(e){a(function(t){return Object(i.a)({},t,{mode:e})})}}))},[n.mode,a]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{center:{lat:37.52897,lng:126.917101},level:s,onZoomChanged:function(e){return d(e.getLevel())},style:{width:"100%",height:"100vh",zIndex:0}},o.a.createElement(f,null),"view"==n.mode?o.a.createElement(Ze,null):o.a.createElement(mt,null)))}var yt=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(de,null,o.a.createElement(ht,null,o.a.createElement(Ot,null))))},Et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,160)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),o(e),l(e)})};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(yt,null)),Et()},99:function(e,t,n){e.exports=n(111)}},[[99,1,2]]]);
//# sourceMappingURL=main.d9b71086.chunk.js.map