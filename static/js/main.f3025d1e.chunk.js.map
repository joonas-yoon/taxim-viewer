{"version":3,"sources":["components/KakaoMap/MapLoader.tsx","components/KakaoMap/index.tsx","components/HorizontalContainer.tsx","components/Dot.tsx","providers/StatusProvider.tsx","components/IconButton.tsx","pages/Map/ViewerButtons.tsx","pages/Map/Viewer.tsx","components/Point.tsx","pages/Map/EditorButtons.tsx","pages/Map/Editor.tsx","helpers/fileInteracts.ts","providers/ControlProvider.tsx","pages/Map/index.tsx","components/Aside.tsx","components/AsideCard.tsx","pages/SidePanel/Controls.tsx","pages/SidePanel/Status.tsx","pages/SidePanel/index.tsx","pages/App.tsx","reportWebVitals.ts","index.tsx"],"names":["Dimmer","styled","div","_templateObject","_taggedTemplateLiteral","MapLoader","props","_useInjectKakaoMapApi","useInjectKakaoMapApi","appkey","process","libraries","retries","loading","error","React","createElement","Fragment","Map","ContainerStyled","_ref","position","css","_templateObject2","_templateObject3","ContentStyled","_templateObject4","_ref2","gap","concat","Divider","MUIDivider","orientation","HorizontalContainer","_ref3","_ref3$gap","_ref3$style","style","children","paddleAnimation","keyframes","Circle","color","size","animate","Container","Dot","_ref3$color","_ref3$size","className","initialState","currentTime","logs","Context","createContext","undefined","StatusProvider","_useState","useState","_useState2","_slicedToArray","state","setState","Provider","value","_objectSpread","useStatusState","ctx","useContext","Error","IconButton","_ref$tooltip","tooltip","_ref$tooltipColor","tooltipColor","_ref$tooltipPlacement","tooltipPlacement","_ref$tooltipSize","tooltipSize","active","_ref$disabled","disabled","_ref$loading","_ref$variant","variant","onClick","MuiTooltip","arrow","title","placement","MuiIconButton","sx","--IconButton-size","CircularProgress","MenuButton","_ref$active","icon","PlaySpeedButton","speed","onSelectSpeed","_React$useState","_React$useState2","anchorEl","setAnchorEl","isOpen","Boolean","close","Item","useCallback","item","MenuItem","Object","assign","selected","select","toFixed","event","currentTarget","SlowMotionVideoIcon","Menu","open","onClose","SliderWrapperStyled","ViewerButtons","running","runable","progressMax","progressCurrent","onProgressUpdated","onClickPlay","onClickUpload","PlayControlButton","PauseIcon","PlayArrowIcon","UploadButton","ref","useRef","htmlFor","width","display","id","name","type","accept","onChange","UploadIcon","current","click","Slider","aria-label","defaultValue","min","max","step","valueLabelDisplay","console","log","marginLeft","MarkerType","Viewer","markerPositions","setMarkerPositions","_useStatusState","_useStatusState2","status","setStatus","_useState3","_useState4","level","setLevel","_useState5","_useState6","setRunable","_useState7","_useState8","setRunning","_useState9","_useState10","setSpeed","_useState11","_useState12","setProgressMax","_useState13","_useState14","setProgressCurrent","_useState15","_useState16","allColors","setColors","useEffect","length","map","useMap","getLevel","displayTimeAt","t","_logs$t","vehicles","time","tasks","vMarkers","Array","from","lat","lng","key","tMarkers","_ref4","pick_lat","pick_lng","drop_lat","drop_lng","flat","filter","_toConsumableArray","interval","DEFAULT_TIMESTEP","timer","setTimeout","prev","clearTimeout","nameKeyValueMap","Set","_ref5","_ref6","_ref7","_defineProperty","Math","random","toString","slice","reduce","previousValue","currentValue","displayIcon","iconType","iconStyle","fill","marginTop","LocalTaxiIcon","HailIcon","KeyboardDoubleArrowDownIcon","_ref9","CustomOverlayMap","cc","parentElement","evt","files","target","file","reader","FileReader","addEventListener","result","JSON","parse","_unused","window","alert","readAsText","Point","_ref4$size","_ref4$selected","onMouseEnter","onMouseDown","onMouseLeave","onMouseUp","data-id","EditorButtons","editMode","onModeChanged","onClickDownload","onSelectMode","mode","ModeButtons","GrainIcon","PolylineIcon","OpenWithIcon","DownloadButton","DownloadIcon","saveGraphFile","nodes","edges","json","keys","keyToIndex","indexOf","transformed","info","to","filename","blob","a","document","download","href","URL","createObjectURL","dataset","downloadurl","join","e","revokeObjectURL","saveFile","Date","toISOString","Blob","stringify","Editor","setNodes","setEdges","setEditMode","setSelected","cursorPos","setCursorPos","isSelected","selectedNode","useMemo","node","getNode","hasNode","_selected","fromID","toID","edge","createEdge","onMapClick","loc","latLng","getLat","getLng","nodeId","onMapMouseUp","onMapMouseMove","setCursor","kakao","maps","addListener","removeListener","onMouseDownPoint","closest","getAttribute","mouseType","button","_ref8","i","onMouseUpPoint","GuideLine","Polyline","path","strokeWeight","strokeColor","strokeOpacity","strokeStyle","NodePoints","_ref10","EdgeLines","_ref11","n","_ref12","onCreate","loadGraphFromFile","_JSON$parse","newNodes","_ref13","_ref14","downloadGraphToFile","viewSpeed","viewRunning","ControlProvider","useControlState","SwitchButton","Button","startDecorator","borderTopRightRadius","borderBottomRightRadius","CableIcon","borderTopLeftRadius","borderBottomLeftRadius","_useControlState","_useControlState2","controls","setControls","SwitchButtonControlled","padding","height","KakaoMap","center","onZoomChanged","zIndex","ContainerWrapper","fold","FoldButtonContainerStyled","FoldButtonStyled","_templateObject5","setFold","ArrowIcon","KeyboardDoubleArrowRightIcon","KeyboardDoubleArrowLeftIcon","Aside","Card","marks","label","Controls","Stack","spacing","paddingBottom","Typography","onChangeCommitted","Status","CurrentTimeCard","date","options","timeZone","dateString","Intl","DateTimeFormat","dateStyle","format","dayPeriod","_timeFormat$split$1$s","hour","minute","second","hour12","split","_timeFormat$split$1$s2","dateToFormatString","SidePanel","tabIndex","setTabIndex","Tabs","theme","_$concat","tabClasses","root","bgcolor","vars","palette","darkChannel","boxShadow","transition","TabList","Tab","fontSize","mr","TabPanel","p","App","reportWebVitals","onPerfEntry","Function","__webpack_require__","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render"],"mappings":"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","file":"static/js/main.f3025d1e.chunk.js","sourcesContent":["import React, { useEffect } from \"react\"\n\nimport KakaoMapSDK, {\n  Map,\n  useInjectKakaoMapApi,\n  useMap,\n} from \"react-kakao-maps-sdk\"\nimport styled from \"styled-components\"\n\ntype MapProps = KakaoMapSDK.MapProps & {\n  style?: React.CSSProperties\n}\n\nconst Dimmer = styled.div`\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: rgb(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n`\n\nexport default function MapLoader(props: MapProps): React.ReactElement {\n  const { loading, error } = useInjectKakaoMapApi({\n    appkey: process.env.REACT_APP_KAKAO_MAP_API_KEY as string,\n    libraries: [\"services\", \"clusterer\"],\n    retries: 3,\n  })\n  return (\n    <>\n      {loading || error ? (\n        <Dimmer />\n      ) : (\n        <Map {...(props as KakaoMapSDK.MapProps)} />\n      )}\n    </>\n  )\n}\n","import MapLoader from \"./MapLoader\"\n\nexport default MapLoader\n","import React from \"react\"\nimport MUIDivider from \"@mui/joy/Divider\"\nimport styled, { css } from \"styled-components\"\n\nconst ContainerStyled = styled.div<{ position: \"top\" | \"bottom\" }>`\n  position: absolute;\n  display: flex;\n  left: calc(200px + 50%);\n  translate: -50% 0%;\n  margin: 0 auto;\n  width: fit-content;\n  height: 42px;\n  place-items: center;\n  padding: 6px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1em;\n  box-sizing: border-box;\n\n  ${({ position }: any) =>\n    position == \"top\"\n      ? css`\n          top: 1rem;\n        `\n      : css`\n          bottom: 1rem;\n        `}\n`\n\nconst ContentStyled = styled.div<{ gap: number }>`\n  display: flex;\n  flex-direction: row;\n  gap: ${({ gap }: any) => `${gap}rem`};\n  margin: 0px auto;\n  place-items: center;\n  box-sizing: border-box;\n`\n\ntype ContainerProps = React.PropsWithChildren & {\n  position: \"top\" | \"bottom\"\n  gap?: number\n  style?: React.CSSProperties\n}\n\nconst HorizontalContainer = ({\n  position,\n  gap = 0.5,\n  style = {},\n  children,\n}: ContainerProps): React.ReactElement => (\n  <ContainerStyled position={position} style={style}>\n    <ContentStyled gap={gap}>{children}</ContentStyled>\n  </ContainerStyled>\n)\n\nexport const Divider = (): React.ReactElement => (\n  <MUIDivider orientation=\"vertical\" />\n)\n\nexport default HorizontalContainer\n","import React from \"react\"\nimport styled, { css, keyframes } from \"styled-components\"\n\nconst paddleAnimation = keyframes`\n  from {\n    transform: scale(1.0);\n    opacity: 1.0;\n  }\n  to {\n    transform: scale(2.0);\n    opacity: 0.0;\n  }\n`\n\ntype CircleStyleProps = {\n  size: number\n  color: string\n  animate?: boolean\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Circle = styled.div`\n  position: absolute;\n  display: flex;\n  width: 1em;\n  height: 1em;\n  background: ${({ color }: CircleStyleProps) => color};\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ${({ size }: CircleStyleProps) => size};\n\n  ${(props: CircleStyleProps) =>\n    props.animate &&\n    css`\n      animation: ${paddleAnimation} 1s ease-in-out infinite;\n    `};\n\n  > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`\n\ntype DotProps = {\n  color?: string\n  size?: number\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Dot = ({ color = \"dodgerblue\", size = 2, children }: DotProps) => {\n  return (\n    <Container>\n      <Circle color={color} size={size} animate={true} />\n      <Circle color={color} size={size}>\n        <div className=\"icon\">{children}</div>\n      </Circle>\n    </Container>\n  )\n}\n\nexport default Dot\n","import React, { createContext, useState, useContext } from \"react\"\n\nexport interface ContextState<T> {\n  state: T\n  setState: React.Dispatch<React.SetStateAction<T>>\n}\n\nexport interface StatusState {\n  currentTime: number | null\n  logs: Array<any>\n}\n\nconst initialState: StatusState = {\n  currentTime: null,\n  logs: [],\n}\n\nconst Context: any = createContext<ContextState<StatusState> | undefined>(\n  undefined\n)\n\nexport const StatusProvider = (props: any) => {\n  const [state, setState] = useState<StatusState>(initialState)\n\n  return (\n    <Context.Provider value={{ state: { ...state }, setState }}>\n      <>{props.children}</>\n    </Context.Provider>\n  )\n}\n\nexport const useStatusState = (): [\n  StatusState,\n  React.Dispatch<React.SetStateAction<StatusState>>\n] => {\n  const ctx: ContextState<StatusState> | undefined = useContext(Context)\n  if (ctx === undefined) {\n    throw new Error(\"useStatusState should be used within StatusProvider\")\n  }\n  const { state, setState } = ctx\n  return [\n    state as StatusState,\n    setState as React.Dispatch<React.SetStateAction<StatusState>>,\n  ]\n}\n","import React, { useCallback } from \"react\"\n\nimport MuiIconButton from \"@mui/joy/IconButton\"\nimport MuiTooltip from \"@mui/joy/Tooltip\"\nimport CircularProgress from \"@mui/joy/CircularProgress\"\n\ntype IconButtonProps = React.PropsWithChildren & {\n  tooltip?: React.ReactNode\n  tooltipColor:\n    | \"primary\"\n    | \"neutral\"\n    | \"danger\"\n    | \"info\"\n    | \"success\"\n    | \"warning\"\n  tooltipPlacement?:\n    | \"bottom\"\n    | \"left\"\n    | \"right\"\n    | \"top\"\n    | \"bottom-end\"\n    | \"bottom-start\"\n    | \"left-end\"\n    | \"left-start\"\n    | \"right-end\"\n    | \"right-start\"\n    | \"top-end\"\n    | \"top-start\"\n  tooltipSize?: \"sm\" | \"md\" | \"lg\"\n  active: boolean\n  disabled?: boolean\n  loading?: boolean\n  variant?: \"plain\" | \"outlined\" | \"soft\" | \"solid\"\n  size: string\n  onClick: (event: React.MouseEvent<HTMLElement>) => void\n}\n\nconst IconButton = ({\n  tooltip = undefined,\n  tooltipColor = \"primary\",\n  tooltipPlacement = \"bottom\",\n  tooltipSize = \"sm\",\n  active,\n  disabled = false,\n  loading = false,\n  variant = \"plain\",\n  size,\n  onClick,\n  children,\n}: IconButtonProps) => {\n  return (\n    <MuiTooltip\n      arrow\n      title={tooltip}\n      color={tooltipColor}\n      placement={tooltipPlacement}\n      size={tooltipSize}\n      variant={variant}\n    >\n      <MuiIconButton\n        variant={active ? \"solid\" : \"soft\"}\n        sx={{\n          \"--IconButton-size\": size,\n        }}\n        disabled={disabled}\n        onClick={onClick}\n      >\n        {loading ? (\n          <CircularProgress\n            color=\"primary\"\n            size=\"sm\"\n            value={33}\n            variant=\"plain\"\n          />\n        ) : (\n          children\n        )}\n      </MuiIconButton>\n    </MuiTooltip>\n  )\n}\n\nexport default IconButton\n","import React, { useState, useCallback, useRef } from \"react\"\n\nimport { Slider, Menu, MenuItem } from \"@mui/joy\"\nimport UploadIcon from \"@mui/icons-material/Upload\"\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\"\nimport PauseIcon from \"@mui/icons-material/Pause\"\n\nimport IconButton from \"../../components/IconButton\"\nimport SlowMotionVideoIcon from \"@mui/icons-material/SlowMotionVideo\"\nimport HorizontalContainer, {\n  Divider,\n} from \"../../components/HorizontalContainer\"\nimport styled from \"styled-components\"\n\ntype MenuButtonProps = {\n  title?: string\n  active?: boolean\n  disabled?: boolean\n  loading?: boolean\n  icon: React.ReactElement\n  onClick: (event: React.MouseEvent<HTMLElement>) => void\n}\n\nconst MenuButton = ({\n  title,\n  active = false,\n  disabled = false,\n  loading = false,\n  icon,\n  onClick,\n}: MenuButtonProps) => {\n  return (\n    <IconButton\n      tooltip={title}\n      tooltipColor=\"primary\"\n      tooltipPlacement=\"top\"\n      active={active}\n      disabled={disabled}\n      loading={loading}\n      variant=\"outlined\"\n      size={\"32px\"}\n      onClick={onClick}\n    >\n      {icon}\n    </IconButton>\n  )\n}\n\ntype SpeedControlProps = {\n  speed: number\n  onSelectSpeed: (speed: number) => void\n}\n\nconst PlaySpeedButton = ({\n  speed,\n  onSelectSpeed,\n}: SpeedControlProps): React.ReactElement => {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const isOpen = Boolean(anchorEl)\n  const handleClick = (event: React.SyntheticEvent<any>) => {\n    setAnchorEl(event.currentTarget)\n  }\n  const close = () => {\n    setAnchorEl(null)\n  }\n  const select = (item: number) => {\n    onSelectSpeed(item)\n    close()\n  }\n\n  const Item = useCallback(\n    (item: number): React.ReactElement => (\n      <MenuItem\n        {...(speed === item && { selected: true, variant: \"soft\" })}\n        onClick={() => select(item)}\n      >\n        x{item.toFixed(1)}\n      </MenuItem>\n    ),\n    [speed]\n  )\n\n  return (\n    <div>\n      <MenuButton\n        title={isOpen ? undefined : \"재생 속도\"}\n        onClick={handleClick}\n        icon={<SlowMotionVideoIcon />}\n      />\n      <Menu\n        anchorEl={anchorEl}\n        open={isOpen}\n        onClose={close}\n        color=\"primary\"\n        size=\"sm\"\n        variant=\"plain\"\n      >\n        {Item(1.0)}\n        {Item(2.0)}\n        {Item(5.0)}\n        {Item(10.0)}\n      </Menu>\n    </div>\n  )\n}\n\nconst SliderWrapperStyled = styled.div`\n  width: calc(100vw - 600px);\n  width: calc(100svw - 600px);\n  max-width: 480px;\n  padding-left: 0.5rem;\n  padding-right: 1rem;\n  box-sizing: border-box;\n`\n\ntype ViewerButtonsProps = {\n  running: boolean\n  runable: boolean\n  progressMax: number\n  progressCurrent: number\n  onProgressUpdated: (progress: number) => void\n  onClickPlay: () => void\n  onClickUpload: (event: React.ChangeEvent<HTMLInputElement>) => void\n} & SpeedControlProps\n\nconst ViewerButtons = ({\n  running,\n  runable,\n  progressMax,\n  progressCurrent,\n  speed,\n  onSelectSpeed,\n  onProgressUpdated,\n  onClickPlay,\n  onClickUpload,\n}: ViewerButtonsProps): React.ReactElement => {\n  const PlayControlButton = useCallback((): React.ReactElement => {\n    return running ? (\n      <MenuButton title=\"일시정지\" onClick={onClickPlay} icon={<PauseIcon />} />\n    ) : (\n      <MenuButton\n        title=\"재생\"\n        disabled={!runable}\n        onClick={onClickPlay}\n        icon={<PlayArrowIcon />}\n      />\n    )\n  }, [running, runable])\n\n  const UploadButton = useCallback((): React.ReactElement => {\n    const ref = useRef<HTMLInputElement>(null)\n    return (\n      <>\n        <label\n          htmlFor=\"upload-log\"\n          style={{\n            width: \"32px\",\n          }}\n        >\n          <input\n            ref={ref}\n            style={{ display: \"none\" }}\n            id=\"upload-log\"\n            name=\"upload-log\"\n            type=\"file\"\n            accept=\".json,application/json\"\n            onChange={onClickUpload}\n          />\n          <MenuButton\n            title=\"업로드\"\n            icon={<UploadIcon />}\n            onClick={() => {\n              if (ref.current) {\n                ref.current.click()\n              }\n            }}\n          />\n        </label>\n      </>\n    )\n  }, [onClickUpload])\n\n  return (\n    <>\n      <HorizontalContainer position=\"bottom\">\n        <UploadButton />\n        <PlayControlButton />\n        <PlaySpeedButton speed={speed} onSelectSpeed={onSelectSpeed} />\n        <Divider />\n        <SliderWrapperStyled>\n          <Slider\n            color=\"primary\"\n            aria-label=\"Timestamp\"\n            defaultValue={0}\n            value={progressCurrent}\n            min={0}\n            max={progressMax}\n            step={1}\n            disabled={!runable || running}\n            size=\"md\"\n            valueLabelDisplay=\"off\"\n            variant=\"solid\"\n            onChange={(\n              event: React.SyntheticEvent | Event,\n              value: number | number[]\n            ) => {\n              console.log(\"new value\", value)\n              if (typeof value === \"number\") {\n                onProgressUpdated(value)\n              } else {\n                onProgressUpdated(value[0])\n              }\n            }}\n            style={{\n              width: \"calc(100% - 0.5rem)\",\n              marginLeft: \"0.5rem\",\n            }}\n          />\n        </SliderWrapperStyled>\n      </HorizontalContainer>\n    </>\n  )\n}\n\nexport default ViewerButtons\n","import React, { useEffect, useState, useCallback } from \"react\"\n\nimport Dot from \"../../components/Dot\"\nimport LocalTaxiIcon from \"@mui/icons-material/LocalTaxi\"\nimport HailIcon from \"@mui/icons-material/Hail\"\nimport KeyboardDoubleArrowDownIcon from \"@mui/icons-material/KeyboardDoubleArrowDown\"\nimport { CustomOverlayMap, useMap } from \"react-kakao-maps-sdk\"\n\nimport { useStatusState, StatusState } from \"../../providers/StatusProvider\"\nimport ViewerButtons from \"./ViewerButtons\"\n\nconst MarkerType = {\n  NONE: -1,\n  VEHICLE: 0,\n  PERSON_PICK: 1,\n  PERSON_DROP: 2,\n}\n\ntype MarkerPosition = {\n  key: string | null\n  color?: string\n  size: number\n  lat: number\n  lng: number\n  type: number\n}\n\ninterface ColorName {\n  [key: string]: string\n}\n\nconst randomColor = () => \"#\" + Math.random().toString(16).slice(-6)\n\ntype TaskType = {\n  id: number\n  drop_lat: number\n  drop_lng: number\n  pick_lat: number\n  pick_lng: number\n  status: number\n  time: number\n}\n\nconst Viewer = (): React.ReactElement => {\n  const [markerPositions, setMarkerPositions] = useState<Array<MarkerPosition>>(\n    []\n  )\n  const [status, setStatus] = useStatusState()\n  const [level, setLevel] = useState<number>(3)\n  const [runable, setRunable] = useState<boolean>(false)\n  const [running, setRunning] = useState<boolean>(false)\n  const [speed, setSpeed] = useState<number>(1.0)\n  const [progressMax, setProgressMax] = useState<number>(0)\n  const [progressCurrent, setProgressCurrent] = useState<number>(0)\n  const [allColors, setColors] = useState<ColorName>({})\n\n  useEffect(() => {\n    const { logs } = status as StatusState\n    setRunable(logs && logs.length > 0)\n  }, [status])\n\n  const map = useMap()\n\n  useEffect(() => {\n    setLevel(map.getLevel())\n  }, [map])\n\n  const { logs } = status as StatusState\n\n  const displayTimeAt = useCallback(\n    (t: number) => {\n      if (!logs || t >= logs.length) return\n\n      const { time, vehicles, tasks } = logs[t]\n\n      const vMarkers: Array<MarkerPosition> = Array.from(vehicles || []).map(\n        ({ name, lat, lng }: any) => ({\n          key: name,\n          color: allColors[name],\n          size: 5,\n          lat,\n          lng,\n          type: MarkerType.VEHICLE,\n        })\n      )\n\n      const tMarkers: Array<MarkerPosition> = Array.from(tasks || [])\n        .map(\n          ({\n            id,\n            pick_lat,\n            pick_lng,\n            drop_lat,\n            drop_lng,\n            status,\n          }: any): any[] => [\n            0 <= status && status <= 5\n              ? {\n                  key: `task-${id}-pick`,\n                  color: allColors[`task-${id}`],\n                  size: 4,\n                  lat: pick_lat,\n                  lng: pick_lng,\n                  type: MarkerType.PERSON_PICK,\n                }\n              : null,\n            {\n              key: `task-${id}-drop`,\n              color: allColors[`task-${id}`],\n              size: 4,\n              lat: drop_lat,\n              lng: drop_lng,\n              type: MarkerType.PERSON_DROP,\n            },\n          ]\n        )\n        .flat()\n        .filter((value) => value !== null)\n\n      setMarkerPositions([...vMarkers, ...tMarkers])\n    },\n    [logs]\n  )\n\n  useEffect(() => {\n    displayTimeAt(progressCurrent)\n  }, [progressCurrent])\n\n  useEffect(() => {\n    if (!running) return\n\n    // 1 frame contains 60 secs\n    const DEFAULT_TIMESTEP = 60 * 1000\n    // 1 frame / 1000 ms\n    const interval = DEFAULT_TIMESTEP / 60 / (speed || 1.0)\n    console.log(\"info\", interval, running, speed)\n\n    const timer = setTimeout(() => {\n      setProgressCurrent((prev) => prev + 1)\n    }, interval)\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [running, speed, progressCurrent])\n\n  useEffect(() => {\n    if (!logs) return\n\n    // collect and create pairs of name and color\n    const nameKeyValueMap: ColorName = [\n      ...Array.from(\n        new Set<string>(\n          logs\n            .map(({ vehicles, tasks }: any) =>\n              vehicles\n                .map(({ name }: any) => `${name}`)\n                .concat(tasks.map(({ id }: any) => `${id}`))\n            )\n            .flat()\n        )\n      ),\n    ]\n      .map((name: string) => ({\n        [name]: randomColor(),\n      }))\n      .reduce(\n        (\n          previousValue: { [x: string]: string },\n          currentValue: { [x: string]: string }\n        ) => ({\n          ...previousValue,\n          ...currentValue,\n        }),\n        {}\n      )\n\n    setColors(nameKeyValueMap)\n    setProgressMax(logs.length - 1)\n  }, [logs])\n\n  const displayIcon = useCallback((iconType: number) => {\n    const iconStyle = {\n      fill: \"white\",\n      marginTop: \"-1px\",\n      width: \"75%\",\n    }\n    if (iconType == MarkerType.NONE) {\n      return <></>\n    } else if (iconType == MarkerType.VEHICLE) {\n      return <LocalTaxiIcon style={iconStyle} />\n    } else if (iconType == MarkerType.PERSON_PICK) {\n      return <HailIcon style={iconStyle} />\n    } else if (iconType == MarkerType.PERSON_DROP) {\n      return <KeyboardDoubleArrowDownIcon style={iconStyle} />\n    }\n  }, [])\n\n  const loadLogFromFile = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const files = evt.target.files\n    if (!files || files.length < 1) {\n      return\n    }\n    const file = files[0]\n    const reader: FileReader = new FileReader()\n    reader.addEventListener(\"load\", (event: any) => {\n      const result = event.target.result\n      try {\n        const { logs } = JSON.parse(result)\n        setStatus((prev) => ({ ...prev, logs }))\n      } catch {\n        window.alert(\"Wrong JSON file format\")\n      }\n    })\n    reader.readAsText(file)\n  }\n\n  return (\n    <>\n      {markerPositions.map(\n        ({ key, color, size, lat, lng, type }: MarkerPosition) => (\n          <CustomOverlayMap\n            key={key}\n            position={{\n              lat,\n              lng,\n            }}\n            ref={(ref: any) => {\n              if (ref == null) return\n              const parentNode = ref.cc.parentElement\n              parentNode.className = \"vehicle-marker\"\n            }}\n          >\n            <Dot color={color || \"dodgerblue\"} size={size / level}>\n              {displayIcon(type)}\n            </Dot>\n          </CustomOverlayMap>\n        )\n      )}\n      <ViewerButtons\n        running={running}\n        runable={runable}\n        progressMax={progressMax}\n        progressCurrent={progressCurrent}\n        speed={speed}\n        onSelectSpeed={setSpeed}\n        onProgressUpdated={setProgressCurrent}\n        onClickPlay={() => setRunning(!running)}\n        onClickUpload={loadLogFromFile}\n      />\n    </>\n  )\n}\n\nexport default Viewer\n","import React from \"react\"\nimport styled from \"styled-components\"\n\ntype CircleStyleProps = {\n  size: number\n  selected: boolean\n  children?: React.ReactNode | React.ReactNode[]\n}\n\nconst Circle = styled.div`\n  position: absolute;\n  display: flex;\n  width: 0.75em;\n  height: 0.75em;\n  background: white;\n  border-width: 0.15rem;\n  border-style: solid;\n  border-color: ${({ selected }: CircleStyleProps) =>\n    selected ? \"black\" : \"var(--joy-palette-danger-500, #d3232f)\"};\n  border-radius: 8rem;\n  align-items: center;\n  justify-content: center;\n  scale: ${({ size }: CircleStyleProps) => size};\n  box-sizing: border-box;\n  cursor: pointer;\n\n  &:hover {\n    border-color: ${({ selected }: CircleStyleProps) =>\n      selected ? \"black\" : \"var(--joy-palette-danger-600, #a10e25)\"};\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`\n\ntype PointProps = {\n  id: string\n  size?: number\n  selected?: boolean\n  children?: React.ReactNode | React.ReactNode[]\n  onMouseEnter?: React.MouseEventHandler<any>\n  onMouseLeave?: React.MouseEventHandler<any>\n  onMouseDown?: React.MouseEventHandler<any>\n  onMouseUp?: React.MouseEventHandler<any>\n  onClick?: React.MouseEventHandler<any>\n}\n\nconst Point = ({\n  id,\n  size = 2,\n  selected = false,\n  children,\n  onMouseEnter,\n  onMouseDown,\n  onMouseLeave,\n  onMouseUp,\n  onClick,\n}: PointProps) => {\n  return (\n    <Container data-id={id}>\n      <Circle\n        size={size}\n        selected={selected}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onMouseDown={onMouseDown}\n        onMouseUp={onMouseUp}\n        onClick={onClick}\n      >\n        <div className=\"icon\">{children}</div>\n      </Circle>\n    </Container>\n  )\n}\n\nexport default Point\n","import React, { useCallback, useRef } from \"react\"\n\nimport GrainIcon from \"@mui/icons-material/Grain\"\nimport PolylineIcon from \"@mui/icons-material/Polyline\"\nimport OpenWithIcon from \"@mui/icons-material/OpenWith\"\nimport UploadIcon from \"@mui/icons-material/Upload\"\nimport DownloadIcon from \"@mui/icons-material/Download\"\n\nimport IconButton from \"../../components/IconButton\"\nimport HorizontalContainer, {\n  Divider,\n} from \"../../components/HorizontalContainer\"\n\ntype MenuButtonProps = {\n  title: string\n  active?: boolean\n  icon: React.ReactElement\n  onClick: () => void\n}\n\nconst MenuButton = ({\n  title,\n  active = false,\n  icon,\n  onClick,\n}: MenuButtonProps) => {\n  return (\n    <IconButton\n      tooltip={title}\n      tooltipColor=\"primary\"\n      tooltipPlacement=\"top\"\n      active={active}\n      variant=\"outlined\"\n      size={\"32px\"}\n      onClick={onClick}\n    >\n      {icon}\n    </IconButton>\n  )\n}\n\ntype EditorButtonsProps = {\n  editMode: string\n  onModeChanged: (mode: string) => void\n  onClickUpload: (event: React.ChangeEvent<HTMLInputElement>) => void\n  onClickDownload: () => void\n}\n\nconst EditorButtons = ({\n  editMode,\n  onModeChanged,\n  onClickUpload,\n  onClickDownload,\n}: EditorButtonsProps): React.ReactElement => {\n  const onSelectMode = (mode: string) => {\n    onModeChanged(mode)\n  }\n\n  const ModeButtons = useCallback((): React.ReactElement => {\n    return (\n      <>\n        <MenuButton\n          title=\"점 추가/삭제\"\n          active={editMode === \"add\"}\n          icon={<GrainIcon />}\n          onClick={() => onSelectMode(\"add\")}\n        />\n        <MenuButton\n          title=\"점 연결\"\n          active={editMode === \"link\"}\n          icon={<PolylineIcon />}\n          onClick={() => onSelectMode(\"link\")}\n        />\n        <MenuButton\n          title=\"점 이동\"\n          active={editMode === \"move\"}\n          icon={<OpenWithIcon />}\n          onClick={() => onSelectMode(\"move\")}\n        />\n      </>\n    )\n  }, [editMode])\n\n  const UploadButton = useCallback((): React.ReactElement => {\n    const ref = useRef<HTMLInputElement>(null)\n    return (\n      <>\n        <label\n          htmlFor=\"upload-log\"\n          style={{\n            width: \"100%\",\n          }}\n        >\n          <input\n            ref={ref}\n            style={{ display: \"none\" }}\n            id=\"upload-log\"\n            name=\"upload-log\"\n            type=\"file\"\n            accept=\".json,application/json\"\n            onChange={onClickUpload}\n          />\n          <MenuButton\n            title=\"업로드\"\n            icon={<UploadIcon />}\n            onClick={() => {\n              if (ref.current) {\n                ref.current.click()\n              }\n            }}\n          />\n        </label>\n      </>\n    )\n  }, [onClickUpload])\n\n  const DownloadButton = useCallback(\n    (): React.ReactElement => (\n      <MenuButton\n        title=\"다운로드\"\n        icon={<DownloadIcon />}\n        onClick={onClickDownload}\n      />\n    ),\n    [onClickDownload]\n  )\n\n  return (\n    <>\n      <HorizontalContainer position=\"bottom\">\n        <ModeButtons />\n        <Divider />\n        <UploadButton />\n        <DownloadButton />\n      </HorizontalContainer>\n    </>\n  )\n}\n\nexport default EditorButtons\n","/* global kakao */\n\nimport React, { useEffect, useState, useCallback, useMemo, useRef } from \"react\"\n\nimport Point from \"../../components/Point\"\nimport EditorButtons from \"./EditorButtons\"\nimport { useControlState, ControlState } from \"../../providers/ControlProvider\"\nimport { jsonToBlob, saveFile } from \"../../helpers/fileInteracts\"\n\nimport { CustomOverlayMap, useMap, Polyline } from \"react-kakao-maps-sdk\"\n\ntype NodeType = {\n  key: string\n  lat: number\n  lng: number\n}\n\ntype EdgeType = {\n  from: string\n  to: string\n}\n\nconst saveGraphFile = (\n  nodes: Array<NodeType>,\n  edges: Array<EdgeType>\n): void => {\n  const keys: Array<string> = nodes.map(({ key }) => key)\n  const keyToIndex = (key: string): number => keys.indexOf(key)\n  const transformed = {\n    nodes: nodes.map(({ key, lat, lng }: NodeType) => ({\n      id: keyToIndex(key),\n      lat,\n      lng,\n      info: {},\n    })),\n    edges: edges.map(({ from, to }: EdgeType) => ({\n      from: keyToIndex(from),\n      to: keyToIndex(to),\n    })),\n  }\n  const filename = \"graph-\" + new Date().toISOString() + \".json\"\n  saveFile(filename, jsonToBlob(transformed))\n}\n\nconst Editor = (): React.ReactElement => {\n  const map: kakao.maps.Map = useMap()\n  const [nodes, setNodes] = useState<Array<NodeType>>([])\n  const [edges, setEdges] = useState<Array<EdgeType>>([])\n  const [level, setLevel] = useState<number>(1)\n  const [editMode, setEditMode] = useState<string>(\"add\")\n  const [selected, setSelected] = useState<Array<string>>([])\n  const [cursorPos, setCursorPos] = useState<NodeType>()\n\n  const isSelected = useCallback(\n    (id: string) => selected.indexOf(id) !== -1,\n    [selected]\n  )\n\n  const selectedNode = useMemo((): NodeType | null => {\n    const node = nodes.filter(({ key }) => isSelected(key))\n    return node.length > 0 ? node[0] : null\n  }, [nodes, isSelected])\n\n  const createEdge = (from: NodeType, to: NodeType) => {\n    setEdges((prev) =>\n      prev\n        .filter((edge) => !(edge.from == from.key && edge.to == to.key))\n        .concat({\n          from: from.key,\n          to: to.key,\n        } as EdgeType)\n    )\n  }\n\n  const getNode = useCallback(\n    (id: string): NodeType | null => {\n      const node = nodes.filter(({ key }: NodeType) => key === id)\n      return node.length > 0 ? node[0] : null\n    },\n    [nodes]\n  )\n\n  const hasNode = useCallback(\n    (id: string): boolean => getNode(id) !== null,\n    [getNode]\n  )\n\n  useEffect(() => {\n    setLevel(map.getLevel())\n  }, [map])\n\n  useEffect(() => {\n    // update edge to sync up\n    setEdges((prev) =>\n      prev.filter(({ from, to }: EdgeType) => hasNode(from) && hasNode(to))\n    )\n  }, [hasNode, setEdges])\n\n  useEffect(() => {\n    console.log(\"selected\", selected)\n    if (selected.length >= 2) {\n      const [fromID, toID] = selected\n      const [from, to] = [getNode(fromID), getNode(toID)]\n      if (from !== null && to !== null) {\n        createEdge(from, to)\n        setCursorPos(undefined)\n        setSelected([])\n      }\n      return\n    }\n  }, [selected, getNode, setCursorPos])\n\n  const onMapClick = useCallback(\n    (evt: any) => {\n      const { latLng: loc } = evt\n      if (editMode !== \"add\") {\n        return\n      }\n      const lat = loc.getLat()\n      const lng = loc.getLng()\n      setNodes((prev) => {\n        const nodeId = Math.random().toString(16).slice(2) as string\n        const node = { key: `node-${nodeId}`, lat, lng } as NodeType\n        console.log(\"add node\", node)\n        return [...prev, node]\n      })\n    },\n    [editMode]\n  )\n\n  const onMapMouseUp = useCallback((evt: any) => {}, [])\n\n  const onMapMouseMove = useCallback(\n    (evt: any) => {\n      const { latLng: loc } = evt\n      const lat = loc.getLat()\n      const lng = loc.getLng()\n      if (editMode === \"link\") {\n        setCursorPos({ key: \"cursor\", lat, lng } as NodeType)\n      } else if (editMode === \"move\") {\n        if (selected.length != 1) {\n          return\n        }\n        setNodes((prev) =>\n          prev.map((node: NodeType): NodeType => {\n            if (selected[0] !== node.key) {\n              return node\n            } else {\n              return { ...node, lat, lng }\n            }\n          })\n        )\n      }\n    },\n    [editMode, setNodes, selected, setCursorPos]\n  )\n\n  useEffect(() => {\n    map.setCursor(\"default\")\n    kakao.maps.event.addListener(map, \"click\", onMapClick)\n    kakao.maps.event.addListener(map, \"mouseup\", onMapMouseUp)\n    kakao.maps.event.addListener(map, \"mousemove\", onMapMouseMove)\n    return () => {\n      map.setCursor(\"\")\n      kakao.maps.event.removeListener(map, \"click\", onMapClick)\n      kakao.maps.event.removeListener(map, \"mouseup\", onMapMouseUp)\n      kakao.maps.event.removeListener(map, \"mousemove\", onMapMouseMove)\n    }\n  }, [map, onMapClick, onMapMouseUp, onMapMouseMove])\n\n  const onMouseDownPoint = useCallback(\n    (evt: any) => {\n      const container = evt.target.closest(\"[data-id]\") as HTMLElement\n      const id = container.getAttribute(\"data-id\") as string\n      const mouseType = evt.button as number\n      if (editMode === \"add\") {\n        if (mouseType === 2) {\n          // right button\n          setNodes((prev) => [...prev].filter(({ key }) => key !== id))\n        }\n      } else if (editMode === \"link\") {\n        if (mouseType === 0) {\n          // left button to select\n          setSelected((prev) => prev.filter((i) => i != id).concat(id))\n        } else if (mouseType === 2) {\n          // right button to unselect\n          setSelected((prev) => prev.filter((i) => i != id))\n        }\n      } else if (editMode === \"move\") {\n        if (mouseType === 0) {\n          // left button to move\n          setSelected((prev) => (prev.length > 0 ? [] : [id]))\n        }\n      }\n    },\n    [editMode, setNodes, setSelected]\n  )\n\n  const onMouseUpPoint = useCallback((evt: any) => {}, [])\n\n  const GuideLine = useCallback(\n    (): React.ReactElement => (\n      <>\n        {editMode === \"link\" && selectedNode && cursorPos && (\n          <Polyline\n            key={`edge-guide`}\n            path={[selectedNode, cursorPos].map(({ lat, lng }: NodeType) => ({\n              lat,\n              lng,\n            }))}\n            strokeWeight={3}\n            strokeColor=\"#db4040\"\n            strokeOpacity={1}\n            strokeStyle=\"dashed\"\n          />\n        )}\n      </>\n    ),\n    [editMode, selectedNode, cursorPos]\n  )\n\n  const NodePoints = useCallback(\n    (): React.ReactElement => (\n      <>\n        {nodes.map(\n          ({ key, lat, lng }: NodeType): React.ReactElement => (\n            <CustomOverlayMap\n              position={{\n                lat,\n                lng,\n              }}\n              key={key}\n            >\n              <Point\n                id={key}\n                size={6 / level}\n                selected={isSelected(key)}\n                onMouseDown={onMouseDownPoint}\n                onMouseUp={onMouseUpPoint}\n              />\n            </CustomOverlayMap>\n          )\n        )}\n      </>\n    ),\n    [nodes, level, isSelected, onMouseDownPoint, onMouseUpPoint]\n  )\n\n  const EdgeLines = useCallback(\n    (): React.ReactElement => (\n      <>\n        {edges.map(({ from, to }: EdgeType): React.ReactElement => {\n          const path: Array<any> = [from, to]\n            .map(getNode)\n            .filter((n) => n !== null)\n          if (path.length != 2) {\n            return <></>\n          }\n          return (\n            <Polyline\n              key={`edge-${from}-${to}`}\n              path={path.map(({ lat, lng }: NodeType) => ({\n                lat,\n                lng,\n              }))}\n              strokeWeight={3}\n              strokeColor=\"#db4040\"\n              strokeOpacity={1}\n              strokeStyle=\"solid\"\n              onCreate={console.log}\n            />\n          )\n        })}\n      </>\n    ),\n    [edges, getNode]\n  )\n\n  const loadGraphFromFile = useCallback(\n    (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const files = evt.target.files\n      if (!files || files.length < 1) {\n        return\n      }\n      const file = files[0]\n      const reader: FileReader = new FileReader()\n      reader.addEventListener(\"load\", (event: any) => {\n        const result = event.target.result\n        try {\n          const { nodes, edges } = JSON.parse(result)\n          const newNodes: Array<NodeType> = nodes.map(\n            ({ id, lat, lng }: any) =>\n              ({\n                key: `node-${id}`,\n                lat,\n                lng,\n              } as NodeType)\n          )\n          setNodes(newNodes)\n          setEdges(\n            edges.map(\n              ({ from, to }: any) =>\n                ({\n                  from: (newNodes[from] as NodeType).key,\n                  to: (newNodes[to] as NodeType).key,\n                } as EdgeType)\n            )\n          )\n          console.log(nodes, edges)\n        } catch {\n          window.alert(\"Failed to parse JSON\")\n        }\n      })\n      reader.readAsText(file)\n    },\n    [setNodes, setEdges]\n  )\n\n  const downloadGraphToFile = useCallback(\n    () => saveGraphFile(nodes, edges),\n    [nodes, edges]\n  )\n\n  return (\n    <>\n      <EdgeLines />\n      <GuideLine />\n      <NodePoints />\n      <EditorButtons\n        editMode={editMode || \"add\"}\n        onClickDownload={downloadGraphToFile}\n        onClickUpload={loadGraphFromFile}\n        onModeChanged={setEditMode}\n      />\n    </>\n  )\n}\n\nexport default Editor\n","export const saveFile = (filename: string, blob: Blob) => {\n  const a = document.createElement(\"a\")\n  a.download = filename\n  a.href = URL.createObjectURL(blob)\n  a.dataset.downloadurl = [\"text/json\", a.download, a.href].join(\":\")\n  a.addEventListener(\"click\", (e) => {\n    setTimeout(() => URL.revokeObjectURL(a.href), 30 * 1000)\n  })\n  a.click()\n}\n\nexport const jsonToBlob = (json: object): Blob =>\n  new Blob([JSON.stringify(json, null, 2)], {\n    type: \"application/json\",\n  })\n","import React, { createContext, useState, useContext } from \"react\"\n\nexport interface ContextState<T> {\n  state: T\n  setState: React.Dispatch<React.SetStateAction<ControlState>>\n}\n\nexport interface ControlState {\n  mode: \"view\" | \"edit\"\n  viewSpeed?: number\n  viewRunning?: boolean\n}\n\nconst initialState: ControlState = {\n  mode: \"view\",\n  viewSpeed: 1.0,\n  viewRunning: false,\n}\n\nconst Context: any = createContext<ContextState<ControlState> | undefined>(\n  undefined\n)\n\nexport const ControlProvider = (props: any) => {\n  const [state, setState] = useState<ControlState>(initialState)\n\n  // const setContext = (state: ControlState) => {\n  //   setState((prevState: ControlState) => ({ ...prevState, ...state }))\n  // }\n\n  return (\n    <Context.Provider value={{ state: { ...state }, setState }}>\n      <>{props.children}</>\n    </Context.Provider>\n  )\n}\n\nexport const useControlState = (): [\n  ControlState,\n  React.Dispatch<React.SetStateAction<ControlState>>\n] => {\n  const ctx: ContextState<ControlState> | undefined = useContext(Context)\n  if (ctx === undefined) {\n    throw new Error(\"useControlState should be used within ControlProvider\")\n  }\n  const { state, setState } = ctx\n  return [\n    state as ControlState,\n    setState as React.Dispatch<React.SetStateAction<ControlState>>,\n  ]\n}\n","import React, { useState, useCallback } from \"react\"\n\nimport KakaoMap from \"../../components/KakaoMap\"\nimport HorizontalContainer from \"../../components/HorizontalContainer\"\nimport { Button } from \"@mui/joy\"\nimport Viewer from \"./Viewer\"\nimport Editor from \"./Editor\"\nimport CableIcon from \"@mui/icons-material/Cable\"\nimport LocalTaxiIcon from \"@mui/icons-material/LocalTaxi\"\nimport { useControlState, ControlState } from \"../../providers/ControlProvider\"\n\nimport \"./index.css\"\n\ntype SwitchButtonProps = React.PropsWithChildren & {\n  mode: \"view\" | \"edit\"\n  onChange: (mode: string) => void\n}\n\nconst SwitchButton = ({\n  mode,\n  onChange,\n}: SwitchButtonProps): React.ReactElement => (\n  <>\n    <Button\n      size=\"sm\"\n      startDecorator={<LocalTaxiIcon />}\n      variant={mode === \"view\" ? \"solid\" : \"plain\"}\n      onClick={() => onChange(\"view\")}\n      sx={{\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n      }}\n    >\n      Viewer\n    </Button>\n    <Button\n      size=\"sm\"\n      startDecorator={<CableIcon />}\n      variant={mode === \"edit\" ? \"solid\" : \"plain\"}\n      onClick={() => onChange(\"edit\")}\n      sx={{\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n      }}\n    >\n      Editor\n    </Button>\n  </>\n)\n\nexport default function Map() {\n  const [controls, setControls] = useControlState()\n\n  const latitude = 37.52897\n  const longitude = 126.917101\n  const [level, setLevel] = useState<number>(3)\n\n  const SwitchButtonControlled = useCallback(\n    (): React.ReactElement => (\n      <HorizontalContainer\n        position=\"top\"\n        gap={0}\n        style={{\n          padding: 0,\n          height: \"auto\",\n        }}\n      >\n        <SwitchButton\n          mode={controls.mode}\n          onChange={(mode: string) => {\n            setControls((prev) => ({ ...prev, mode } as ControlState))\n          }}\n        />\n      </HorizontalContainer>\n    ),\n    [(controls as ControlState).mode, setControls]\n  )\n\n  return (\n    <>\n      <KakaoMap\n        center={{\n          lat: latitude,\n          lng: longitude,\n        }}\n        level={level}\n        onZoomChanged={(map) => setLevel(map.getLevel())}\n        style={{\n          width: \"100%\",\n          height: \"100vh\",\n          zIndex: 0,\n        }}\n      >\n        <SwitchButtonControlled />\n        {controls.mode == \"view\" ? <Viewer /> : <Editor />}\n      </KakaoMap>\n    </>\n  )\n}\n","import React, { useState, useCallback } from \"react\"\n\nimport styled, { css, keyframes } from \"styled-components\"\n\nimport KeyboardDoubleArrowLeftIcon from \"@mui/icons-material/KeyboardDoubleArrowLeft\"\nimport KeyboardDoubleArrowRightIcon from \"@mui/icons-material/KeyboardDoubleArrowRight\"\n\nconst ContainerWrapper = styled.div<{ fold: boolean }>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  max-width: 400px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n  transition: transform 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  z-index: 99999;\n\n  ${({ fold }: any) =>\n    fold &&\n    css`\n      transform: translateX(-100%);\n    `}\n`\n\nconst ContainerStyled = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  outline: 0;\n  margin: 0;\n  padding: 1em 2em;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n`\n\nconst FoldButtonContainerStyled = styled.div`\n  position: absolute;\n  display: flex;\n  width: 1.25em;\n  height: 100%;\n  right: -1.25em;\n  justify-content: center;\n  align-items: center;\n`\n\nconst FoldButtonStyled = styled.div`\n  width: 100%;\n  height: 3em;\n  display: flex;\n  padding-right: 0.25em;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  clip-path: inset(-1em -1em -1em 0px);\n  box-shadow: 0 0 1em rgba(128, 128, 128, 0.5);\n  cursor: pointer;\n`\n\nconst Container = (props: React.PropsWithChildren): React.ReactElement => {\n  const [fold, setFold] = useState<boolean>(false)\n  const ArrowIcon = useCallback(() => {\n    const props = {\n      sx: {\n        width: \"100%\",\n      },\n    }\n    return fold ? (\n      <KeyboardDoubleArrowRightIcon {...props} />\n    ) : (\n      <KeyboardDoubleArrowLeftIcon {...props} />\n    )\n  }, [fold])\n  return (\n    <ContainerWrapper fold={fold}>\n      <ContainerStyled>\n        <>{props.children}</>\n      </ContainerStyled>\n      <FoldButtonContainerStyled>\n        <FoldButtonStyled\n          onClick={(evt) => {\n            setFold((prev) => !prev)\n          }}\n        >\n          <ArrowIcon />\n        </FoldButtonStyled>\n      </FoldButtonContainerStyled>\n    </ContainerWrapper>\n  )\n}\n\nconst Aside = (props: React.PropsWithChildren): React.ReactElement => {\n  return (\n    <>\n      <Container>\n        <>{props.children}</>\n      </Container>\n    </>\n  )\n}\n\nexport default Aside\n","import styled from \"styled-components\"\n\nconst Card = styled.div`\n  border: 1px solid #cfcfcf;\n  border-radius: 0.33em;\n  padding: 1rem 1.5rem;\n  margin-top: 1rem;\n  box-sizing: border-box;\n\n  .header {\n    font-weight: bold;\n  }\n`\n\nexport default Card\n","import React from \"react\"\n\nimport { Typography, Slider, Stack } from \"@mui/joy\"\n\nimport Card from \"../../components/AsideCard\"\nimport { useControlState, ControlState } from \"../../providers/ControlProvider\"\n\nconst marks = [\n  {\n    value: 1.0,\n    label: \"x1.0\",\n  },\n  {\n    value: 2.0,\n    label: \"x2.0\",\n  },\n  {\n    value: 4.0,\n    label: \"x4.0\",\n  },\n  {\n    value: 8.0,\n    label: \"x8.0\",\n  },\n]\n\nconst Controls = (): React.ReactElement => {\n  const [controls, setControls] = useControlState()\n\n  return (\n    <>\n      <Stack spacing={2}>\n        <Card\n          style={{\n            paddingBottom: \"1.75rem\",\n          }}\n        >\n          <Typography className=\"header\">Time Speed</Typography>\n          <Slider\n            color=\"primary\"\n            aria-label=\"Time Speed\"\n            defaultValue={1.0}\n            min={1.0}\n            max={8.0}\n            step={0.5}\n            disabled={false}\n            marks={marks}\n            size=\"lg\"\n            valueLabelDisplay=\"off\"\n            variant=\"solid\"\n            onChangeCommitted={(\n              event: React.SyntheticEvent | Event,\n              value: number | number[]\n            ) => {\n              console.log(\"new value\", value)\n              setControls((prev: ControlState) => ({\n                ...prev,\n                viewSpeed: value as number,\n              }))\n            }}\n            style={{\n              width: \"calc(100% - 0.5rem)\",\n              marginLeft: \"0.5rem\",\n            }}\n          />\n        </Card>\n      </Stack>\n    </>\n  )\n}\n\nexport default Controls\n","import React, { useCallback } from \"react\"\n\nimport Stack from \"@mui/joy/Stack\"\nimport Typography from \"@mui/joy/Typography\"\n\nimport Card from \"../../components/AsideCard\"\nimport { useStatusState, StatusState } from \"../../providers/StatusProvider\"\n\nconst dateToFormatString = (date: Date): string => {\n  const options = {\n    timeZone: \"Asia/Seoul\",\n  }\n  const dateString: string = new Intl.DateTimeFormat(\"ko-kr\", {\n    dateStyle: \"full\",\n    ...options,\n  }).format(date)\n  const dayPeriod: string = new Intl.DateTimeFormat(\"ko-kr\", {\n    dayPeriod: \"long\",\n    ...options,\n  }).format(date)\n  const timeFormat = new Intl.DateTimeFormat(\"ko-kr\", {\n    hour: \"numeric\",\n    minute: \"numeric\",\n    second: \"numeric\",\n    hour12: true,\n    ...options,\n  }).format(date)\n  const [hour, minute, sec] = timeFormat.split(\" \")[1].split(\":\")\n  const timeString: string = `${hour}시 ${minute}분`\n  return [dateString, dayPeriod, timeString].join(\"\\n\")\n}\n\nconst Status = () => {\n  const [status, setStatus] = useStatusState()\n  const { currentTime } = status as StatusState\n\n  const CurrentTimeCard = useCallback(() => {\n    if (currentTime === null) {\n      return null\n    }\n    const date = new Date(currentTime)\n    return (\n      <Card>\n        <Typography>{dateToFormatString(date)}</Typography>\n      </Card>\n    )\n  }, [currentTime])\n\n  return (\n    <>\n      <Stack spacing={2}>\n        <CurrentTimeCard />\n      </Stack>\n    </>\n  )\n}\n\nexport default Status\n","import React, { useState, useEffect } from \"react\"\n\nimport { TabPanel, Tabs, TabList } from \"@mui/joy\"\nimport Tab, { tabClasses } from \"@mui/joy/Tab\"\n\nimport CableIcon from \"@mui/icons-material/Cable\"\nimport LocalTaxiIcon from \"@mui/icons-material/LocalTaxi\"\nimport Controls from \"./Controls\"\nimport Status from \"./Status\"\nimport { useControlState, ControlState } from \"../../providers/ControlProvider\"\n\nconst SidePanel = (): React.ReactElement => {\n  const [controls, setControls] = useControlState()\n  const [tabIndex, setTabIndex] = useState<number>(0)\n\n  useEffect(() => {\n    const { mode } = controls as ControlState\n    setTabIndex(mode === \"view\" ? 0 : 1)\n  }, [controls])\n\n  return (\n    <>\n      <Tabs\n        color=\"primary\"\n        sx={(theme: any) => {\n          return {\n            [`& .${tabClasses.root}`]: {\n              bgcolor: theme.vars.palette[\"primary\"].darkChannel,\n              boxShadow: \"none\",\n              transition: \"0.3s\",\n              [`&:not(.${tabClasses.selected}):hover`]: {\n                bgcolor: theme.vars.palette[\"primary\"][\"200\"],\n              },\n              [`&.${tabClasses.selected}`]: {\n                color: \"white\",\n                bgcolor: theme.vars.palette[\"primary\"][\"300\"],\n              },\n            },\n          }\n        }}\n        onChange={(event, value) => {\n          if (value === 0) {\n            setControls((prev: ControlState) => ({ ...prev, mode: \"view\" }))\n          } else {\n            setControls((prev: ControlState) => ({ ...prev, mode: \"edit\" }))\n          }\n        }}\n        value={tabIndex}\n        defaultValue={0}\n      >\n        <TabList color=\"primary\">\n          <Tab>\n            <LocalTaxiIcon\n              sx={{\n                fontSize: \"100%\",\n                mr: 1,\n              }}\n            />\n            Viewer\n          </Tab>\n          <Tab>\n            <CableIcon\n              sx={{\n                fontSize: \"100%\",\n                mr: 1,\n              }}\n            />\n            Editor\n          </Tab>\n        </TabList>\n        <TabPanel value={0} sx={{ p: 2 }}>\n          <Controls />\n          <Status />\n        </TabPanel>\n        <TabPanel value={1} sx={{ p: 2 }}></TabPanel>\n      </Tabs>\n    </>\n  )\n}\n\nexport default SidePanel\n","import React from \"react\"\nimport Map from \"./Map\"\nimport Aside from \"../components/Aside\"\nimport { ControlProvider } from \"../providers/ControlProvider\"\nimport { StatusProvider } from \"../providers/StatusProvider\"\nimport SidePanel from \"./SidePanel\"\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <StatusProvider>\n        <ControlProvider>\n          <Map />\n          <div className=\"hud-overlay\">\n            <Aside>\n              <SidePanel />\n            </Aside>\n          </div>\n        </ControlProvider>\n      </StatusProvider>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom/client\"\nimport \"./index.css\"\nimport App from \"./pages/App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\") as HTMLElement)\nroot.render(\n  // <React.StrictMode>\n  <App />\n  // </React.StrictMode>\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}